class Barrier{constructor(e,t,i,a,s,u,m,l,r,h,o){this.texture=r,this.jumped=!1,this.origW=h,this.origH=o,this.initialP={x:e,y:t,z:i},this.p={x:e,y:t,z:i},this.v={x:a,y:s,z:u},this.width=m/i,this.height=l/i}show(){this.texture.show(this.p.x,this.p.y,this.origW,this.origH)}update(){this.p.x+=this.v.x,this.p.y+=this.v.y,this.p.z+=this.v.z,this.v.x=Math.abs(this.p.x-this.initialP.x)>BlueJumpGame.MOVEMENT?-1*this.v.x:this.v.x}}class BlueJumpGame{constructor(){this.gameMode,this.dirtBlock,this.brickBlock,this.barriers=[],this.fakeBarriers=[],this.textAnimations=[],this.colours=[],this.orientedMovement=0,this.rotation=0,this.highest=0,this.fullScreenActive=!1,this.returned=!1,this._initControls(),this._initGame(),this._initBarriers(),this._pickNewHighest(0,!0),this._setGameMode(-1),this._loadAssetPixels(),colorMode(RGB),this.colours=[color(64,112,184),color(191,218,235),color(90,0,0),color(200,0,0)]}loop(e){this._showBackground();const t=this._showBarriers(!0);t.p.y>-100&&BlueJumpGame.LEVELCREATION&&this._pickNewHighest(t.p,!1),this.player.activities[this.player.activity].show(this.player.p.x,this.player.p.y,100,100),this._showFloor(this.player.stats.alive);for(let e=0;e<this.textAnimations.length;e++)this.textAnimations[e].shouldBeDeleted()?(this.textAnimations[e].update(),this.textAnimations[e].show()):this.textAnimations[e].splice(e,1);this._handleGameMode(this.gameMode),this._showScore(this.player.stats.score),this._showCredits(),e&&(textAlign(RIGHT),textSize(18),stroke(0),fill(255,255,0),text("score: "+this.player.getScore(),width-60,60),text("barriers jumped: "+this.player.stats.barriersJumped,width-60,90),text("Pixels traversed vertically: "+this.player.getTraversedPixels(),width-60,120),text("FPS: "+Math.round(frameRate()),width-60,150),text("mobile controls: "+BlueJumpGame.MOBILE_CONTROLS,width-60,210),text("rotation: "+this.rotation.toFixed(3),width-60,240),text("orientedMovement: "+this.orientedMovement.toFixed(3),width-60,270),text("# of fake barriers: "+this.fakeBarriers.length,width-60,300),text("width: "+window.screen.width,width-60,330),text("height: "+(BlueJumpGame.IS_SAFARI?windowHeight:window.screen.height),width-60,360),text("mouseX, mouseY: "+Math.round(mouseX)+", "+Math.round(mouseY),width-60,390))}_initControls(){BlueJumpGame.MOBILE_CONTROLS?(window.addEventListener("deviceorientation",this.deviceOrientationHandler),BlueJumpGame.BARRIER_SCALE*=2.5,BlueJumpGame.MOVEMENT*=2.5,BlueJumpGame.ARROW_SCALE*=2.5,BlueJumpGame.CONTROLS_MSG="Tilt your device to move",BlueJumpGame.TIP="TIP: use portrait mode!",BlueJumpGame.JUMP_POWER=20):(BlueJumpGame.CONTROLS_MSG="Use arrow keys (< and >) or 'A' and 'D' to move",BlueJumpGame.TIP="TIP: press 'esc' to pause the game",BlueJumpGame.JUMP_POWER=30)}_initGame(){this.player=new Player(width/2-BlueJumpGame.BARRIER_SCALE/3,3*height/4,BlueJumpGame.blueGuy02,BlueJumpGame.blueGuy03,BlueJumpGame.blueGuy04,BlueJumpGame.transition,BlueJumpGame.grave),BlueJumpGame.spikesFloor=new Floor(BlueJumpGame.spikes[0],BlueJumpGame.spikes[1],BlueJumpGame.spikes[2],BlueJumpGame.spikes[3],BlueJumpGame.spikes[4]),BlueJumpGame.lavaFloor=new Floor(BlueJumpGame.lava[0],BlueJumpGame.lava[1],BlueJumpGame.lava[2],BlueJumpGame.lava[3],BlueJumpGame.lava[4])}_initBarriers(){this.barriers.push(new Barrier(this.player.p.x+.5*this.player.activities[this.player.activity].width-.5*BlueJumpGame.BARRIER_SCALE,this.player.p.y+this.player.activities[this.player.activity].height,1,0,0,0,BlueJumpGame.BARRIER_SCALE,.25*BlueJumpGame.BARRIER_SCALE,new Sprite(BlueJumpGame.dirtblock[0],BlueJumpGame.dirtblock[1],BlueJumpGame.dirtblock[2],BlueJumpGame.dirtblock[3],BlueJumpGame.dirtblock[4],BlueJumpGame.dirtblock[5],BlueJumpGame.dirtblock[6]),150,46))}_showBackground(){noStroke();for(let e=0;e<1;e+=1/BlueJumpGame.BACKGROUND_SHADES){const t=this.player.stats.alive?0:2,i=lerpColor(this.colours[t],this.colours[t+1],e);fill(i),rect(0,height*e,width,height*(e+1))}}_showBarriers(e){if(e){let e=this.fakeBarriers[0];for(let t=0;t<this.fakeBarriers.length;t++)this.fakeBarriers[t].p.y<e.p.y&&(e=this.fakeBarriers[t]),this.fakeBarriers[t].show();this.fakeBarriers.length<BlueJumpGame.MAX_BARRIERS&&this._pickNewHighest(e.p,!0,this.fakeBarriers.length<BlueJumpGame.MAX_BARRIERS-2)}let t=this.barriers[0];for(let e=0;e<this.barriers.length;e++)this.barriers[e].p.y<t.p.y&&(t=this.barriers[e]),this.barriers[e].show();return t}_showFloor(e){e?BlueJumpGame.spikesFloor.show(150,46):BlueJumpGame.lavaFloor.show(150,50)}_showScore(e){fill(0),strokeWeight(3),stroke(255),textAlign(CENTER),textSize(.9*BlueJumpGame.TEXT_SIZE),text(e,width/2,.8*BlueJumpGame.TEXT_SIZE)}_showCredits(){textAlign(RIGHT),textFont("arial"),textSize(.3*BlueJumpGame.TEXT_SIZE),noStroke(),text("Â©",width-.3*BlueJumpGame.BARRIER_SCALE-2*BlueJumpGame.TEXT_SIZE,height/2),textFont(BlueJumpGame.FONT),textSize(.2*BlueJumpGame.TEXT_SIZE),text("| 2016 | Nout Kleef",width-.3*BlueJumpGame.BARRIER_SCALE,height/2)}_loadAssetPixels(){BlueJumpGame.dirtblock[0].loadPixels(),BlueJumpGame.spikes[0].loadPixels(),BlueJumpGame.brickblock0[0].loadPixels(),BlueJumpGame.brickblock1[0].loadPixels(),BlueJumpGame.transition[0].loadPixels(),BlueJumpGame.grave[0].loadPixels(),BlueJumpGame.blueGuy02[0].loadPixels(),BlueJumpGame.blueGuy03[0].loadPixels(),BlueJumpGame.blueGuy04[0].loadPixels(),BlueJumpGame.lava[0].loadPixels()}_setGameMode(e){switch(e){case-1:this.gameMode=-1,this.player.shouldUpdate=!1;break;case 0:this.gameMode=0,this.player.shouldUpdate=!0;break;case 1:this.gameMode=1,this.player.shouldUpdate=!1}}_handleGameMode(e){switch(e){case 0:BlueJumpGame.IS_SAFARI||BlueJumpGame.prefix(document,"FullScreen")||BlueJumpGame.prefix(document,"IsFullScreen")||(this._setGameMode(-1),this.fullScreenActive=!1);for(let e=0;e<this.barriers.length;e++)this.barriers[e].update();this.player.shouldUpdate&&this.fullScreenActive&&this.player.update();break;case-1:noStroke(),fill("rgba(0,0,0,0.8)"),rect(0,0,window.screen.width,BlueJumpGame.IS_SAFARI?windowHeight:window.screen.height),fill(200,200,0),strokeWeight(.125*BlueJumpGame.ARROW_SCALE),stroke(255),this._showInstructions();break;case 1:console.warn("deprecated gameMode detected")}}_showInstructions(){push(),translate(100,30),beginShape(),vertex(0,0),vertex(1.05*BlueJumpGame.ARROW_SCALE,.27*BlueJumpGame.ARROW_SCALE),vertex(.62*BlueJumpGame.ARROW_SCALE,.55*BlueJumpGame.ARROW_SCALE),vertex(1.65*BlueJumpGame.ARROW_SCALE,2.085*BlueJumpGame.ARROW_SCALE),vertex(1.18*BlueJumpGame.ARROW_SCALE,2.41*BlueJumpGame.ARROW_SCALE),vertex(.18*BlueJumpGame.ARROW_SCALE,.79*BlueJumpGame.ARROW_SCALE),vertex(-.25*BlueJumpGame.ARROW_SCALE,BlueJumpGame.ARROW_SCALE),endShape(CLOSE),pop(),textAlign(LEFT),textSize(BlueJumpGame.TEXT_SIZE),fill(0),text("PLAY",100,30+3*BlueJumpGame.ARROW_SCALE),strokeWeight(.0675*BlueJumpGame.ARROW_SCALE),textSize(.5*BlueJumpGame.TEXT_SIZE),text(BlueJumpGame.CONTROLS_MSG,40,4*BlueJumpGame.ARROW_SCALE),text(BlueJumpGame.TIP,40,4.7*BlueJumpGame.ARROW_SCALE)}play(){BlueJumpGame.prefix(document,"FullScreen")||BlueJumpGame.prefix(document,"IsFullScreen")||BlueJumpGame.prefix(document.getElementById("defaultCanvas0"),"RequestFullScreen"),1!==this.gameMode&&setTimeout(function(){this.fullScreenActive=!0,this._setGameMode(0)}.bind(this),1e3)}_pickNewHighest(e,t,i){let a,s;if(this.player.stats.alive?(s=BlueJumpGame.dirtblock,a=46):Math.random()<.25?(s=BlueJumpGame.brickblock0,a=46):(s=BlueJumpGame.brickblock1,a=33),t){const e=10+Math.random()*(width-110),t=i?Math.random()*((BlueJumpGame.IS_SAFARI?windowHeight:window.screen.height)+200)-200:175*Math.random()-200,u=2+1.1*Math.random();this.fakeBarriers.push(new Barrier(e,t,u,0,0,0,BlueJumpGame.BARRIER_SCALE,.25*BlueJumpGame.BARRIER_SCALE,new Sprite(s[0],s[1]/u,s[2]/u,s[3],s[4],s[5],s[6]),150,a))}else{const t=.02*Math.floor(this.player.stats.score/2500)*BlueJumpGame.BARRIER_SCALE;t=constrain(t,0,.5*BlueJumpGame.BARRIER_SCALE);const i=BlueJumpGame.MOBILE_CONTROLS?.5:.8,u=Math.random()<.5?1:-1,m=.5*(BlueJumpGame.JUMP_POWER*BlueJumpGame.JUMP_POWER+BlueJumpGame.JUMP_POWER)/BlueJumpGame.GRAVITY,l=1.7*BlueJumpGame.JUMP_POWER*BlueJumpGame.HORIZONTAL_SPEED*i*1.2+t;l=constrain(l,0,width);const r=(.3+.7*Math.random())*m,h=constrain(e.x+u*(.3+.7*Math.random())*l,BlueJumpGame.MOVEMENT,width-BlueJumpGame.BARRIER_SCALE-BlueJumpGame.MOVEMENT);this.barriers.push(new Barrier(h,e.y-r,1,6*Math.random()*i-3,0,0,BlueJumpGame.BARRIER_SCALE,.25*BlueJumpGame.BARRIER_SCALE,new Sprite(s[0],s[1],s[2],s[3],s[4],s[5],s[6]),150,a))}}deviceOrientationHandler(e){this.rotation=e.gamma,this.orientedMovement=.020444*e.gamma}static prefix(e,t){let i,a,s=0;for(;s<BlueJumpGame.pfx.length&&!e[i];){if(i=t,""===BlueJumpGame.pfx[s]&&(i=i.substr(0,1).toLowerCase()+i.substr(1)),"undefined"!==(a=typeof e[i=BlueJumpGame.pfx[s]+i]))return BlueJumpGame.pfx=[BlueJumpGame.pfx[s]],"function"===a?e[i]():e[i];s++}}static isMobileDevice(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}}BlueJumpGame.AUTOJUMP=!0,BlueJumpGame.DEBUG=!0,BlueJumpGame.LEVELCREATION=!0,BlueJumpGame.LANDING_THRESHOLD=25,BlueJumpGame.HORIZONTAL_SPEED=11,BlueJumpGame.GRAVITY=1,BlueJumpGame.BARRIER_SCALE=.07*window.screen.width,BlueJumpGame.ARROW_SCALE=.06*window.screen.width,BlueJumpGame.MOVEMENT=.75*BlueJumpGame.BARRIER_SCALE,BlueJumpGame.BACKGROUND_SHADES=13,BlueJumpGame.MAX_BARRIERS=12,BlueJumpGame.CONTROLS_MSG="",BlueJumpGame.TIP="",BlueJumpGame.MOBILE_CONTROLS=BlueJumpGame.isMobileDevice(),BlueJumpGame.JUMP_POWER,BlueJumpGame.TEXT_SIZE=.5*BlueJumpGame.BARRIER_SCALE,BlueJumpGame.FONT,BlueJumpGame.pfx=["webkit","moz","ms","o",""],BlueJumpGame.field,BlueJumpGame.IS_SAFARI=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,BlueJumpGame.dirtblock=[null,BlueJumpGame.BARRIER_SCALE,.25*BlueJumpGame.BARRIER_SCALE,1,!1,0,0],BlueJumpGame.spikes=[null,5/3*BlueJumpGame.BARRIER_SCALE,.513*BlueJumpGame.BARRIER_SCALE,1,!1,0,0],BlueJumpGame.lava=[null,5/3*BlueJumpGame.BARRIER_SCALE,.558*BlueJumpGame.BARRIER_SCALE,5,!0,0,0],BlueJumpGame.brickblock0=[null,BlueJumpGame.BARRIER_SCALE,.25*BlueJumpGame.BARRIER_SCALE,1,!1,0,0],BlueJumpGame.brickblock1=[null,BlueJumpGame.BARRIER_SCALE,.25*BlueJumpGame.BARRIER_SCALE,1,!1,0,0],BlueJumpGame.blueGuy02=[null,2*BlueJumpGame.BARRIER_SCALE/3,2*BlueJumpGame.BARRIER_SCALE/3,7,!0,18,18],BlueJumpGame.blueGuy03=[null,2*BlueJumpGame.BARRIER_SCALE/3,2*BlueJumpGame.BARRIER_SCALE/3,10,!1,19,19],BlueJumpGame.blueGuy04=[null,2*BlueJumpGame.BARRIER_SCALE/3,2*BlueJumpGame.BARRIER_SCALE/3,6,!1,19,19],BlueJumpGame.transition=[null,2*BlueJumpGame.BARRIER_SCALE/3,2.2*BlueJumpGame.BARRIER_SCALE/3,1,!1,0,0],BlueJumpGame.grave=[null,2*BlueJumpGame.BARRIER_SCALE/3,2.2*BlueJumpGame.BARRIER_SCALE/3,1,!1,0,0];class Floor{constructor(e,t,i,a,s){this.sprite=new Sprite(e,t,i,a,s,0,0,30),this.repeats=Math.ceil(window.screen.width/t)}show(e,t){for(let i=0;i<this.repeats;i++)this.sprite.show(i*this.sprite.displayWidth,(BlueJumpGame.IS_SAFARI?windowHeight:window.screen.height)-this.sprite.displayHeight,e,t)}}class Player{constructor(e,t){this.highestY=t,this.buried=!1,this.shouldUpdate=!0,this.initialP={x:e,y:t},this.p={x:e,y:t},this.v={x:0,y:0},this.a={x:0,y:BlueJumpGame.GRAVITY},this.stats={score:0,pixelsTraversed:0,barriersJumped:0,alive:!0},this.activity=0,this.activities=[];for(let e=2;e<=6;e++)void 0!==arguments[e]&&(this.activities.push(new Sprite(arguments[e][0],arguments[e][1],arguments[e][2],arguments[e][3],arguments[e][4],arguments[e][5],arguments[e][6])),this.walk=function(){this.activity=1});this.falling=!0}fall(){this.falling=!0,this.a.y=BlueJumpGame.GRAVITY}stand(){this.activity=0}getTraversedPixels(){return this.highestY=this.highestY>this.p.y?this.p.y:this.highestY,Math.round(this.stats.pixelsTraversed+this.initialP.y-this.highestY)}getScore(){const e=3*this.getTraversedPixels()+400*(this.stats.barriersJumped-1)*.7;return Math.round(e)}update(){if(!BlueJumpGame.AUTOJUMP&&!keyDown(32)||this.falling||this.jump(),this.stats.alive&&this.stand(),this.v.x=0,BlueJumpGame.MOBILE_CONTROLS?this.v.x=BlueJumpGame.HORIZONTAL_SPEED*orientedMovement:(keyDown(37)||keyDown("a"))!==(keyDown(39)||keyDown("d"))&&(this.stats.alive&&this.walk(),keyDown(37)||keyDown("a")?this.v.x=-BlueJumpGame.HORIZONTAL_SPEED:this.v.x=BlueJumpGame.HORIZONTAL_SPEED),this.p.x=constrain(this.p.x+this.v.x,0,width-this.activities[this.activity].width),this.p.y=constrain(this.p.y+this.v.y,0,height-this.activities[this.activity].height),this.v.x+=this.a.x,this.v.y+=this.a.y,this.p.y<height/3){const e=height/3-this.p.y;this.stats.pixelsTraversed+=e,this.p.y=height/3;for(let t=0;t<bj.barriers.length;t++)bj.barriers[t].p.y+=e,bj.barriers[t].p.y>=height-40&&bj.barriers.splice(t,1);for(let t=0;t<fakeBarriers.length;t++)fakeBarriers[t].p.y+=e/fakeBarriers[t].p.z,fakeBarriers[t].p.y>=height-50&&fakeBarriers.splice(t,1)}this.a.y=BlueJumpGame.GRAVITY,this.p.y+this.activities[this.activity].height>=height&&(this.stats.alive?(this.land(),this.die()):this.bury());for(let e=0;e<barriers.length;e++)this.collide(barriers[e])&&this.p.y+this.activities[this.activity].height>=barriers[e].p.y&&this.p.y+this.activities[this.activity].height-barriers[e].p.y<=LANDING_THRESHOLD&&this.v.y>0&&(this.land(barriers[e].p.y-this.activities[this.activity].height,barriers[e].v.x),barriers[e].jumped||this.stats.barriersJumped++,barriers[e].jumped=!0);this.stats.score=this.getScore()}jump(e){const t=void 0!==e?e:BlueJumpGame.JUMP_POWER;this.fall(),this.v.y-=t}land(e,t){this.falling=!1,this.a.y=0,this.v.y=0,void 0!==e&&(this.p.y=e),void 0!==t&&(this.p.x+=2*t)}collide(e){return this.p.x+this.activities[this.activity].width-this.activities[this.activity].padding.right>=e.p.x&&this.p.x+this.activities[this.activity].padding.left<=e.p.x+e.width&&this.p.y+this.activities[this.activity].height>=e.p.y&&this.p.y<=e.p.y+e.height}die(){this.shouldUpdate=!1,this.activity=3,this.p.y=(BlueJumpGame.IS_SAFARI?windowHeight:window.screen.height)-3*BlueJumpGame.BARRIER_SCALE/3,textAnimations.push(new TextAnimation(3,.8*width,2*BlueJumpGame.TEXT_SIZE,frameRate()/3,2*frameRate()/3,[0,0,0],frameCount)),setTimeout(()=>{textAnimations.push(new TextAnimation(2,.8*width,2*BlueJumpGame.TEXT_SIZE,frameRate()/3,2*frameRate()/3,[0,0,0],frameCount))},1e3),setTimeout(()=>{textAnimations.push(new TextAnimation(1,.8*width,2*BlueJumpGame.TEXT_SIZE,frameRate()/3,2*frameRate()/3,[0,0,0],frameCount))},2e3),setTimeout(()=>{this.stats.alive=!1,this.activity=2,this.jump(2.2*JUMP_POWER),this.shouldUpdate=!0,textAnimations.push(new TextAnimation("SECOND CHANCE!",.8*width,1.5*BlueJumpGame.TEXT_SIZE,frameRate()/3,2*frameRate(),[0,0,0],frameCount))},3200)}resurrect(){this.stats.alive=!0,this.activity=0}bury(){this.shouldUpdate=!1,this.burying=setInterval(()=>{this.p.y+=2,this.p.y>=(BlueJumpGame.IS_SAFARI?windowHeight:window.screen.height)-BlueJumpGame.BARRIER_SCALE/3&&(clearInterval(this.burying),this.activity=4,this.burying=setInterval(()=>{this.p.y--,this.p.y<=(BlueJumpGame.IS_SAFARI?windowHeight:window.screen.height)-2.7*BlueJumpGame.BARRIER_SCALE/3&&(clearInterval(this.burying),textAnimations.push(new TextAnimation("GAME OVER!",.8*width,1.5*txtSize,frameRate()/3,1/0,[0,0,0],frameCount,width/2,100)),gameMode(1),this.buried=!0)},1e3/frameRate()))},1e3/frameRate())}}class Sprite{constructor(e,t,i,a,s,u,m,l){this.img=e,this.displayWidth=t,this.displayHeight=i,this.framesCount=a,this.action=s,this.count=0,this.fpsScale=void 0===l?2:l,this.padding={left:void 0===u?0:u,right:void 0===m?0:m}}show(e,t,i,a){let s=Math.floor(this.count/this.fpsScale)%this.framesCount;const u=void 0===i?this.displayWidth:i,m=void 0===a?this.displayHeight:a;this.count++,this.action&&s===this.framesCount-1&&Math.random()>.25&&(s=0,this.count++),image(this.img,e,t,this.displayWidth,this.displayHeight,s*u,0,u,m)}}class Text{constructor(e,t,i,a,s,u,m,l,r){this.text=e,this.finalSize=i,this.currentSize=t-t%i,this.decrease=(this.currentSize-this.finalSize)/a,this.transition=a,this.delay=s,this.colour=u,this.creation=m,this.x=void 0===l?width/2:l,this.y=void 0===r?height/2:r}update(){this.currentSize>this.finalSize&&(this.currentSize-=this.decrease)}show(){textSize(this.currentSize),textAlign(CENTER),fill(this.colour),stroke(255),strokeWeight(6),text(this.text,this.x,this.y)}shouldBeDeleted(){return frameCount<=this.transition+this.delay+this.creation}}let bj;function preload(){BlueJumpGame.dirtblock[0]=loadImage("assets/img/dirt0.png"),BlueJumpGame.spikes[0]=loadImage("assets/img/spikes.png"),BlueJumpGame.brickblock0[0]=loadImage("assets/img/bricks0.png"),BlueJumpGame.brickblock1[0]=loadImage("assets/img/bricks1.png"),BlueJumpGame.transition[0]=loadImage("assets/img/transition.png"),BlueJumpGame.grave[0]=loadImage("assets/img/grave.png"),BlueJumpGame.blueGuy02[0]=loadImage("assets/img/sprites/bouncing.png"),BlueJumpGame.blueGuy03[0]=loadImage("assets/img/sprites/walking.png"),BlueJumpGame.blueGuy04[0]=loadImage("assets/img/sprites/undead.png"),BlueJumpGame.lava[0]=loadImage("assets/img/sprites/lava.png"),BlueJumpGame.FONT=loadFont("assets/fonts/robot01.ttf")}function setup(){bj=new BlueJumpGame,BlueJumpGame.IS_SAFARI?createCanvas(window.screen.width,windowHeight):createCanvas(window.screen.width,window.screen.height),BlueJumpGame.field=document.getElementById("defaultCanvas0").getContext("2d"),0===BlueJumpGame.MOBILE_CONTROLS?frameRate(30):frameRate(27),textFont(BlueJumpGame.FONT)}function draw(){background(51),bj.loop(BlueJumpGame.DEBUG)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJhcnJpZXIuanMiLCJCbHVlSnVtcEdhbWUuanMiLCJGbG9vci5qcyIsIlBsYXllci5qcyIsIlNwcml0ZS5qcyIsIlRleHQuanMiLCJpbmRleC5qcyJdLCJuYW1lcyI6WyJCYXJyaWVyIiwiW29iamVjdCBPYmplY3RdIiwieCIsInkiLCJ6IiwieHYiLCJ5diIsInp2Iiwid2lkdGgiLCJoZWlnaHQiLCJ0ZXh0dXJlIiwib3JpZ1ciLCJvcmlnSCIsInRoaXMiLCJqdW1wZWQiLCJpbml0aWFsUCIsInAiLCJ2Iiwic2hvdyIsIk1hdGgiLCJhYnMiLCJCbHVlSnVtcEdhbWUiLCJNT1ZFTUVOVCIsImdhbWVNb2RlIiwiZGlydEJsb2NrIiwiYnJpY2tCbG9jayIsImJhcnJpZXJzIiwiZmFrZUJhcnJpZXJzIiwidGV4dEFuaW1hdGlvbnMiLCJjb2xvdXJzIiwib3JpZW50ZWRNb3ZlbWVudCIsInJvdGF0aW9uIiwiaGlnaGVzdCIsImZ1bGxTY3JlZW5BY3RpdmUiLCJyZXR1cm5lZCIsIl9pbml0Q29udHJvbHMiLCJfaW5pdEdhbWUiLCJfaW5pdEJhcnJpZXJzIiwiX3BpY2tOZXdIaWdoZXN0IiwiX3NldEdhbWVNb2RlIiwiX2xvYWRBc3NldFBpeGVscyIsImNvbG9yTW9kZSIsIlJHQiIsImNvbG9yIiwiZGVidWciLCJfc2hvd0JhY2tncm91bmQiLCJfc2hvd0JhcnJpZXJzIiwiTEVWRUxDUkVBVElPTiIsInBsYXllciIsImFjdGl2aXRpZXMiLCJhY3Rpdml0eSIsIl9zaG93Rmxvb3IiLCJzdGF0cyIsImFsaXZlIiwiaSIsImxlbmd0aCIsInNob3VsZEJlRGVsZXRlZCIsInVwZGF0ZSIsInNwbGljZSIsIl9oYW5kbGVHYW1lTW9kZSIsIl9zaG93U2NvcmUiLCJzY29yZSIsIl9zaG93Q3JlZGl0cyIsInRleHRBbGlnbiIsIlJJR0hUIiwidGV4dFNpemUiLCJzdHJva2UiLCJmaWxsIiwidGV4dCIsImdldFNjb3JlIiwiYmFycmllcnNKdW1wZWQiLCJnZXRUcmF2ZXJzZWRQaXhlbHMiLCJyb3VuZCIsImZyYW1lUmF0ZSIsIk1PQklMRV9DT05UUk9MUyIsInRvRml4ZWQiLCJ3aW5kb3ciLCJzY3JlZW4iLCJJU19TQUZBUkkiLCJ3aW5kb3dIZWlnaHQiLCJtb3VzZVgiLCJtb3VzZVkiLCJhZGRFdmVudExpc3RlbmVyIiwiZGV2aWNlT3JpZW50YXRpb25IYW5kbGVyIiwiQkFSUklFUl9TQ0FMRSIsIkFSUk9XX1NDQUxFIiwiQ09OVFJPTFNfTVNHIiwiVElQIiwiSlVNUF9QT1dFUiIsIlBsYXllciIsImJsdWVHdXkwMiIsImJsdWVHdXkwMyIsImJsdWVHdXkwNCIsInRyYW5zaXRpb24iLCJncmF2ZSIsInNwaWtlc0Zsb29yIiwiRmxvb3IiLCJzcGlrZXMiLCJsYXZhRmxvb3IiLCJsYXZhIiwicHVzaCIsIlNwcml0ZSIsImRpcnRibG9jayIsIm5vU3Ryb2tlIiwiYmciLCJCQUNLR1JPVU5EX1NIQURFUyIsIm9yaWdpbiIsInNoYWRlIiwibGVycENvbG9yIiwicmVjdCIsInNob3dGYWtlcyIsImhpZ2hlc3RGYWtlIiwiZmIiLCJNQVhfQkFSUklFUlMiLCJiIiwic3Ryb2tlV2VpZ2h0IiwiQ0VOVEVSIiwiVEVYVF9TSVpFIiwidGV4dEZvbnQiLCJGT05UIiwibG9hZFBpeGVscyIsImJyaWNrYmxvY2swIiwiYnJpY2tibG9jazEiLCJtb2RlIiwic2hvdWxkVXBkYXRlIiwicHJlZml4IiwiZG9jdW1lbnQiLCJfc2hvd0luc3RydWN0aW9ucyIsImNvbnNvbGUiLCJ3YXJuIiwidHJhbnNsYXRlIiwiYmVnaW5TaGFwZSIsInZlcnRleCIsImVuZFNoYXBlIiwiQ0xPU0UiLCJwb3AiLCJMRUZUIiwiZ2V0RWxlbWVudEJ5SWQiLCJzZXRUaW1lb3V0IiwiYmluZCIsIm9sZFBvcyIsInBpY2tSYW5kb20iLCJpblNpZ2h0IiwiaCIsInR4dHIiLCJyYW5kb20iLCJkaWZmaWN1bHR5IiwiZmxvb3IiLCJjb25zdHJhaW4iLCJjb25zdHIiLCJkaXIiLCJtYXhZIiwiR1JBVklUWSIsIm1heFgiLCJIT1JJWk9OVEFMX1NQRUVEIiwiaW5jcmVhc2VZIiwibmV3WCIsImUiLCJnYW1tYSIsIm9iaiIsIm1ldGhvZCIsIm0iLCJ0IiwicGZ4Iiwic3Vic3RyIiwidG9Mb3dlckNhc2UiLCJjaGVjayIsImEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ2ZW5kb3IiLCJvcGVyYSIsInRlc3QiLCJBVVRPSlVNUCIsIkRFQlVHIiwiTEFORElOR19USFJFU0hPTEQiLCJpc01vYmlsZURldmljZSIsImZpZWxkIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiSFRNTEVsZW1lbnQiLCJpbmRleE9mIiwiaW1nIiwiZGlzcGxheVdpZHRoIiwiZGlzcGxheUhlaWdodCIsImZyYW1lc0NvdW50IiwiYWN0aW9uIiwic3ByaXRlIiwicmVwZWF0cyIsImNlaWwiLCJvcmlnV2lkdGgiLCJvcmlnSGVpZ2h0IiwiaGlnaGVzdFkiLCJidXJpZWQiLCJwaXhlbHNUcmF2ZXJzZWQiLCJhcmd1bWVudHMiLCJ3YWxrIiwiZmFsbGluZyIsInMiLCJrZXlEb3duIiwianVtcCIsInN0YW5kIiwiZXhjZWVkYW5jZSIsImJqIiwibGFuZCIsImRpZSIsImJ1cnkiLCJjb2xsaWRlIiwiRiIsInBvd2VyIiwiZmFsbCIsImRYIiwidGFyZ2V0IiwicGFkZGluZyIsInJpZ2h0IiwibGVmdCIsIlRleHRBbmltYXRpb24iLCJmcmFtZUNvdW50IiwiYnVyeWluZyIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInR4dFNpemUiLCJJbmZpbml0eSIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwiZnBzU2NhbGUiLCJjb3VudCIsImZyYW1lSW5kZXgiLCJzcmNXaWR0aCIsInNyY0hlaWdodCIsImltYWdlIiwiVGV4dCIsImJlZ2luU2l6ZSIsImZpbmFsU2l6ZSIsImRlbGF5IiwiY29sb3VyIiwiY3JlYXRpb24iLCJjdXJyZW50U2l6ZSIsImRlY3JlYXNlIiwicHJlbG9hZCIsImxvYWRJbWFnZSIsImxvYWRGb250Iiwic2V0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QSxpQ0FDQTdOLGFBQUE4RSxLQUFBLEdBQUErSSxVQUFBLCtCQUVBN04sYUFBQWtHLEtBQUE0SCxTQUFBLDRCQUdBLFNBQUFDLFFBRUF2QyxHQUFBLElBQUF4TCxhQUVBQSxhQUFBeUQsVUFDQXVLLGFBQUF6SyxPQUFBQyxPQUFBckUsTUFBQXVFLGNBRUFzSyxhQUFBekssT0FBQUMsT0FBQXJFLE1BQUFvRSxPQUFBQyxPQUFBcEUsUUFFQVksYUFBQTRKLE1BQ0FuRCxTQUFBVyxlQUFBLGtCQUFBNkcsV0FBQSxNQUVBLElBQUFqTyxhQUFBcUQsZ0JBQUFELFVBQUEsSUFDQUEsVUFBQSxJQUVBNkMsU0FBQWpHLGFBQUFrRyxNQUdBLFNBQUFnSSxPQUNBQyxXQUFBLElBQ0EzQyxHQUFBNEMsS0FBQXBPLGFBQUF5SiIsImZpbGUiOiJibHVlSnVtcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEJhcnJpZXIge1xuICAgIGNvbnN0cnVjdG9yKHgsIHksIHosIHh2LCB5diwgenYsIHdpZHRoLCBoZWlnaHQsIHRleHR1cmUsIG9yaWdXLCBvcmlnSCkge1xuICAgICAgICB0aGlzLnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICB0aGlzLmp1bXBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9yaWdXID0gb3JpZ1c7XG4gICAgICAgIHRoaXMub3JpZ0ggPSBvcmlnSDtcbiAgICAgICAgdGhpcy5pbml0aWFsUCA9IHtcbiAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgejogelxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnAgPSB7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeSxcbiAgICAgICAgICAgIHo6IHpcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy52ID0ge1xuICAgICAgICAgICAgeDogeHYsXG4gICAgICAgICAgICB5OiB5dixcbiAgICAgICAgICAgIHo6IHp2XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aCAvIHo7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0IC8gejtcbiAgICB9XG5cbiAgICBzaG93KCkge1xuICAgICAgICB0aGlzLnRleHR1cmUuc2hvdyh0aGlzLnAueCwgdGhpcy5wLnksIHRoaXMub3JpZ1csIHRoaXMub3JpZ0gpO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5wLnggKz0gdGhpcy52Lng7XG4gICAgICAgIHRoaXMucC55ICs9IHRoaXMudi55O1xuICAgICAgICB0aGlzLnAueiArPSB0aGlzLnYuejtcbiAgICAgICAgdGhpcy52LnggPSBNYXRoLmFicyh0aGlzLnAueCAtIHRoaXMuaW5pdGlhbFAueCkgPiBCbHVlSnVtcEdhbWUuTU9WRU1FTlQgPyB0aGlzLnYueCAqIC0xIDogdGhpcy52Lng7XG4gICAgfVxufVxuIiwiY2xhc3MgQmx1ZUp1bXBHYW1lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5nYW1lTW9kZTtcbiAgICAgICAgdGhpcy5kaXJ0QmxvY2s7XG4gICAgICAgIHRoaXMuYnJpY2tCbG9jaztcbiAgICAgICAgdGhpcy5iYXJyaWVycyA9IFtdO1xuICAgICAgICB0aGlzLmZha2VCYXJyaWVycyA9IFtdO1xuICAgICAgICB0aGlzLnRleHRBbmltYXRpb25zID0gW107XG4gICAgICAgIHRoaXMuY29sb3VycyA9IFtdO1xuICAgICAgICB0aGlzLm9yaWVudGVkTW92ZW1lbnQgPSAwO1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5oaWdoZXN0ID0gMDtcbiAgICAgICAgdGhpcy5mdWxsU2NyZWVuQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmV0dXJuZWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLl9pbml0Q29udHJvbHMoKTtcbiAgICAgICAgdGhpcy5faW5pdEdhbWUoKTtcbiAgICAgICAgdGhpcy5faW5pdEJhcnJpZXJzKCk7XG4gICAgICAgIC8vIGZpbmFsaXNlXG4gICAgICAgIHRoaXMuX3BpY2tOZXdIaWdoZXN0KDAsIHRydWUpO1xuICAgICAgICB0aGlzLl9zZXRHYW1lTW9kZSgtMSk7XG4gICAgICAgIC8vIGZpbmlzaCBsb2FkaW5nIGFzc2V0c1xuICAgICAgICB0aGlzLl9sb2FkQXNzZXRQaXhlbHMoKTtcbiAgICAgICAgLy8gc2V0IHVwIGNvbG91ciBwYWxsZXR0ZVxuICAgICAgICBjb2xvck1vZGUoUkdCKTtcbiAgICAgICAgdGhpcy5jb2xvdXJzID0gW1xuICAgICAgICAgICAgY29sb3IoNjQsIDExMiwgMTg0KSxcbiAgICAgICAgICAgIGNvbG9yKDE5MSwgMjE4LCAyMzUpLFxuICAgICAgICAgICAgY29sb3IoOTAsIDAsIDApLFxuICAgICAgICAgICAgY29sb3IoMjAwLCAwLCAwKVxuICAgICAgICBdO1xuICAgIH1cblxuICAgIGxvb3AoZGVidWcpIHtcbiAgICAgICAgdGhpcy5fc2hvd0JhY2tncm91bmQoKTtcbiAgICAgICAgLy8gYmFycmllcnNcbiAgICAgICAgY29uc3QgaGlnaGVzdCA9IHRoaXMuX3Nob3dCYXJyaWVycyh0cnVlKTtcbiAgICAgICAgaWYgKGhpZ2hlc3QucC55ID4gLTEwMCAmJiBCbHVlSnVtcEdhbWUuTEVWRUxDUkVBVElPTilcbiAgICAgICAgICAgIHRoaXMuX3BpY2tOZXdIaWdoZXN0KGhpZ2hlc3QucCwgZmFsc2UpO1xuICAgICAgICAvLyBjaGFyYWN0ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXIuYWN0aXZpdGllc1t0aGlzLnBsYXllci5hY3Rpdml0eV0uc2hvdyhcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnAueCwgdGhpcy5wbGF5ZXIucC55LFxuICAgICAgICAgICAgMTAwLCAxMDBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gZmxvb3JcbiAgICAgICAgdGhpcy5fc2hvd0Zsb29yKHRoaXMucGxheWVyLnN0YXRzLmFsaXZlKTtcbiAgICAgICAgLy8gdGV4dCBhbmltYXRpb25zXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy50ZXh0QW5pbWF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMudGV4dEFuaW1hdGlvbnNbaV0uc2hvdWxkQmVEZWxldGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRBbmltYXRpb25zW2ldLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dEFuaW1hdGlvbnNbaV0uc2hvdygpO1xuICAgICAgICAgICAgfSBlbHNlIHRoaXMudGV4dEFuaW1hdGlvbnNbaV0uc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGhhbmRsZSBnYW1lTW9kZS1zcGVjaWZpYyBzdHVmZlxuICAgICAgICB0aGlzLl9oYW5kbGVHYW1lTW9kZSh0aGlzLmdhbWVNb2RlKTtcbiAgICAgICAgLy8gc2hvdyBzY29yZVxuICAgICAgICB0aGlzLl9zaG93U2NvcmUodGhpcy5wbGF5ZXIuc3RhdHMuc2NvcmUpO1xuICAgICAgICAvLyBzaG93IGNyZWRpdHNcbiAgICAgICAgdGhpcy5fc2hvd0NyZWRpdHMoKTtcbiAgICAgICAgLy8gZGVidWdnaW5nXG4gICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgdGV4dEFsaWduKFJJR0hUKTtcbiAgICAgICAgICAgIHRleHRTaXplKDE4KTtcbiAgICAgICAgICAgIHN0cm9rZSgwKTtcbiAgICAgICAgICAgIGZpbGwoMjU1LCAyNTUsIDApO1xuICAgICAgICAgICAgdGV4dChcInNjb3JlOiBcIiArIHRoaXMucGxheWVyLmdldFNjb3JlKCksIHdpZHRoIC0gNjAsIDYwKTtcbiAgICAgICAgICAgIHRleHQoXCJiYXJyaWVycyBqdW1wZWQ6IFwiICsgdGhpcy5wbGF5ZXIuc3RhdHMuYmFycmllcnNKdW1wZWQsIHdpZHRoIC0gNjAsIDkwKTtcbiAgICAgICAgICAgIHRleHQoXCJQaXhlbHMgdHJhdmVyc2VkIHZlcnRpY2FsbHk6IFwiICsgdGhpcy5wbGF5ZXIuZ2V0VHJhdmVyc2VkUGl4ZWxzKCksIHdpZHRoIC0gNjAsIDEyMCk7XG4gICAgICAgICAgICB0ZXh0KFwiRlBTOiBcIiArIE1hdGgucm91bmQoZnJhbWVSYXRlKCkpLCB3aWR0aCAtIDYwLCAxNTApO1xuICAgICAgICAgICAgdGV4dChcIm1vYmlsZSBjb250cm9sczogXCIgKyBCbHVlSnVtcEdhbWUuTU9CSUxFX0NPTlRST0xTLCB3aWR0aCAtIDYwLCAyMTApO1xuICAgICAgICAgICAgdGV4dChcInJvdGF0aW9uOiBcIiArIHRoaXMucm90YXRpb24udG9GaXhlZCgzKSwgd2lkdGggLSA2MCwgMjQwKTtcbiAgICAgICAgICAgIHRleHQoXCJvcmllbnRlZE1vdmVtZW50OiBcIiArIHRoaXMub3JpZW50ZWRNb3ZlbWVudC50b0ZpeGVkKDMpLCB3aWR0aCAtIDYwLCAyNzApO1xuICAgICAgICAgICAgdGV4dChcIiMgb2YgZmFrZSBiYXJyaWVyczogXCIgKyB0aGlzLmZha2VCYXJyaWVycy5sZW5ndGgsIHdpZHRoIC0gNjAsIDMwMCk7XG4gICAgICAgICAgICB0ZXh0KFwid2lkdGg6IFwiICsgd2luZG93LnNjcmVlbi53aWR0aCwgd2lkdGggLSA2MCwgMzMwKTtcbiAgICAgICAgICAgIHRleHQoXCJoZWlnaHQ6IFwiICsgKEJsdWVKdW1wR2FtZS5JU19TQUZBUkkgPyB3aW5kb3dIZWlnaHQgOiB3aW5kb3cuc2NyZWVuLmhlaWdodCksIHdpZHRoIC0gNjAsIDM2MCk7XG4gICAgICAgICAgICB0ZXh0KFwibW91c2VYLCBtb3VzZVk6IFwiICsgTWF0aC5yb3VuZChtb3VzZVgpICsgXCIsIFwiICsgTWF0aC5yb3VuZChtb3VzZVkpLCB3aWR0aCAtIDYwLCAzOTApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2luaXRDb250cm9scygpIHtcbiAgICAgICAgaWYgKEJsdWVKdW1wR2FtZS5NT0JJTEVfQ09OVFJPTFMpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICdkZXZpY2VvcmllbnRhdGlvbicsXG4gICAgICAgICAgICAgICAgdGhpcy5kZXZpY2VPcmllbnRhdGlvbkhhbmRsZXJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSAqPSAyLjU7XG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUuTU9WRU1FTlQgKj0gMi41O1xuICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLkFSUk9XX1NDQUxFICo9IDIuNTtcbiAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5DT05UUk9MU19NU0cgPSAnVGlsdCB5b3VyIGRldmljZSB0byBtb3ZlJztcbiAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5USVAgPSAnVElQOiB1c2UgcG9ydHJhaXQgbW9kZSEnO1xuICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLkpVTVBfUE9XRVIgPSAyMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5DT05UUk9MU19NU0cgPSAnVXNlIGFycm93IGtleXMgKDwgYW5kID4pIG9yIFxcJ0FcXCcgJyArXG4gICAgICAgICAgICAgICAgJ2FuZCBcXCdEXFwnIHRvIG1vdmUnO1xuICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLlRJUCA9ICdUSVA6IHByZXNzIFxcJ2VzY1xcJyB0byBwYXVzZSB0aGUgZ2FtZSc7XG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUuSlVNUF9QT1dFUiA9IDMwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2luaXRHYW1lKCkge1xuICAgICAgICAvLyBpbml0aWFsaXNlIHBsYXllclxuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIoIC8vIFRPRE86IHJlZmFjdG9yIHRoaXMuIGRyYXN0aWNhbGx5LlxuICAgICAgICAgICAgd2lkdGggLyAyIC0gQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUgLyAzLFxuICAgICAgICAgICAgaGVpZ2h0ICogMyAvIDQsXG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUuYmx1ZUd1eTAyLFxuICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLmJsdWVHdXkwMyxcbiAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5ibHVlR3V5MDQsXG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUudHJhbnNpdGlvbixcbiAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5ncmF2ZVxuICAgICAgICApO1xuICAgICAgICAvLyBjcmVhdGUgdGhlIGZsb29yc1xuICAgICAgICBCbHVlSnVtcEdhbWUuc3Bpa2VzRmxvb3IgPSBuZXcgRmxvb3IoXG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUuc3Bpa2VzWzBdLFxuICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLnNwaWtlc1sxXSxcbiAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5zcGlrZXNbMl0sXG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUuc3Bpa2VzWzNdLFxuICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLnNwaWtlc1s0XVxuICAgICAgICApO1xuICAgICAgICBCbHVlSnVtcEdhbWUubGF2YUZsb29yID0gbmV3IEZsb29yKFxuICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLmxhdmFbMF0sXG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUubGF2YVsxXSxcbiAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5sYXZhWzJdLFxuICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLmxhdmFbM10sXG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUubGF2YVs0XVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9pbml0QmFycmllcnMoKSB7XG4gICAgICAgIHRoaXMuYmFycmllcnMucHVzaCggLy8gVE9ETzogcmVmYWN0b3IgdGhpcyB0b29cbiAgICAgICAgICAgIG5ldyBCYXJyaWVyKFxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnAueCArIDAuNSAqIHRoaXMucGxheWVyLmFjdGl2aXRpZXNbdGhpcy5wbGF5ZXIuYWN0aXZpdHldLndpZHRoIC0gMC41ICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUsXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIucC55ICsgdGhpcy5wbGF5ZXIuYWN0aXZpdGllc1t0aGlzLnBsYXllci5hY3Rpdml0eV0uaGVpZ2h0LFxuICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUsXG4gICAgICAgICAgICAgICAgMC4yNSAqIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFLFxuICAgICAgICAgICAgICAgIG5ldyBTcHJpdGUoXG4gICAgICAgICAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5kaXJ0YmxvY2tbMF0sXG4gICAgICAgICAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5kaXJ0YmxvY2tbMV0sXG4gICAgICAgICAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5kaXJ0YmxvY2tbMl0sXG4gICAgICAgICAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5kaXJ0YmxvY2tbM10sXG4gICAgICAgICAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5kaXJ0YmxvY2tbNF0sXG4gICAgICAgICAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5kaXJ0YmxvY2tbNV0sXG4gICAgICAgICAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5kaXJ0YmxvY2tbNl0pLFxuICAgICAgICAgICAgICAgIDE1MCxcbiAgICAgICAgICAgICAgICA0NlxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIF9zaG93QmFja2dyb3VuZCgpIHtcbiAgICAgICAgbm9TdHJva2UoKTtcbiAgICAgICAgZm9yIChsZXQgYmcgPSAwOyBiZyA8IDE7IGJnICs9IDEgLyBCbHVlSnVtcEdhbWUuQkFDS0dST1VORF9TSEFERVMpIHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbiA9IHRoaXMucGxheWVyLnN0YXRzLmFsaXZlID8gMCA6IDI7IC8vIDAxOmFsaXZlLCAyMzpkZWFkXG4gICAgICAgICAgICBjb25zdCBzaGFkZSA9IGxlcnBDb2xvcihcbiAgICAgICAgICAgICAgICB0aGlzLmNvbG91cnNbb3JpZ2luXSwgdGhpcy5jb2xvdXJzW29yaWdpbiArIDFdLCBiZ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGZpbGwoc2hhZGUpO1xuICAgICAgICAgICAgcmVjdCgwLCBoZWlnaHQgKiBiZywgd2lkdGgsIGhlaWdodCAqIChiZyArIDEpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zaG93QmFycmllcnMoc2hvd0Zha2VzKSB7XG4gICAgICAgIGlmIChzaG93RmFrZXMpIHtcbiAgICAgICAgICAgIGxldCBoaWdoZXN0RmFrZSA9IHRoaXMuZmFrZUJhcnJpZXJzWzBdO1xuICAgICAgICAgICAgZm9yIChsZXQgZmIgPSAwOyBmYiA8IHRoaXMuZmFrZUJhcnJpZXJzLmxlbmd0aDsgZmIrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZha2VCYXJyaWVyc1tmYl0ucC55IDwgaGlnaGVzdEZha2UucC55KVxuICAgICAgICAgICAgICAgICAgICBoaWdoZXN0RmFrZSA9IHRoaXMuZmFrZUJhcnJpZXJzW2ZiXTsgLy8gVE9ETzogaXMgdGhpcyByaWdodD9cbiAgICAgICAgICAgICAgICB0aGlzLmZha2VCYXJyaWVyc1tmYl0uc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZmFrZUJhcnJpZXJzLmxlbmd0aCA8IEJsdWVKdW1wR2FtZS5NQVhfQkFSUklFUlMpXG4gICAgICAgICAgICAgICAgdGhpcy5fcGlja05ld0hpZ2hlc3QoXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hlc3RGYWtlLnAsXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmFrZUJhcnJpZXJzLmxlbmd0aCA8IEJsdWVKdW1wR2FtZS5NQVhfQkFSUklFUlMgLSAyXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkcmF3IHRoZSByZWFsIGJhcnJpZXJzICYgZmluZCB0aGUgaGlnaGVzdFxuICAgICAgICBsZXQgaGlnaGVzdCA9IHRoaXMuYmFycmllcnNbMF07XG4gICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgdGhpcy5iYXJyaWVycy5sZW5ndGg7IGIrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuYmFycmllcnNbYl0ucC55IDwgaGlnaGVzdC5wLnkpXG4gICAgICAgICAgICAgICAgaGlnaGVzdCA9IHRoaXMuYmFycmllcnNbYl07IC8vIFRPRE86IGlzIHRoaXMgcmlnaHQ/XG4gICAgICAgICAgICB0aGlzLmJhcnJpZXJzW2JdLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGlnaGVzdDtcbiAgICB9XG5cbiAgICBfc2hvd0Zsb29yKGFsaXZlKSB7XG4gICAgICAgIGlmIChhbGl2ZSkgQmx1ZUp1bXBHYW1lLnNwaWtlc0Zsb29yLnNob3coMTUwLCA0Nik7XG4gICAgICAgIGVsc2UgQmx1ZUp1bXBHYW1lLmxhdmFGbG9vci5zaG93KDE1MCwgNTApO1xuICAgIH1cblxuICAgIF9zaG93U2NvcmUoc2NvcmUpIHtcbiAgICAgICAgZmlsbCgwKTtcbiAgICAgICAgc3Ryb2tlV2VpZ2h0KDMpO1xuICAgICAgICBzdHJva2UoMjU1KTtcbiAgICAgICAgdGV4dEFsaWduKENFTlRFUik7XG4gICAgICAgIHRleHRTaXplKDAuOSAqIEJsdWVKdW1wR2FtZS5URVhUX1NJWkUpO1xuICAgICAgICB0ZXh0KHNjb3JlLCB3aWR0aCAvIDIsIDAuOCAqIEJsdWVKdW1wR2FtZS5URVhUX1NJWkUpO1xuICAgIH1cblxuICAgIF9zaG93Q3JlZGl0cygpIHtcbiAgICAgICAgdGV4dEFsaWduKFJJR0hUKTtcbiAgICAgICAgdGV4dEZvbnQoJ2FyaWFsJyk7XG4gICAgICAgIHRleHRTaXplKDAuMyAqIEJsdWVKdW1wR2FtZS5URVhUX1NJWkUpO1xuICAgICAgICBub1N0cm9rZSgpO1xuICAgICAgICB0ZXh0KCdcXHUwMEE5Jywgd2lkdGggLSAwLjMgKiBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSAtIDIgKiBCbHVlSnVtcEdhbWUuVEVYVF9TSVpFLCBoZWlnaHQgLyAyKTtcbiAgICAgICAgdGV4dEZvbnQoQmx1ZUp1bXBHYW1lLkZPTlQpO1xuICAgICAgICB0ZXh0U2l6ZSgwLjIgKiBCbHVlSnVtcEdhbWUuVEVYVF9TSVpFKTtcbiAgICAgICAgdGV4dCgnfCAyMDE2IHwgTm91dCBLbGVlZicsIHdpZHRoIC0gMC4zICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUsIGhlaWdodCAvIDIpO1xuICAgIH1cblxuICAgIF9sb2FkQXNzZXRQaXhlbHMoKSB7XG4gICAgICAgIC8vIGltYWdlc1xuICAgICAgICBCbHVlSnVtcEdhbWUuZGlydGJsb2NrWzBdLmxvYWRQaXhlbHMoKTtcbiAgICAgICAgQmx1ZUp1bXBHYW1lLnNwaWtlc1swXS5sb2FkUGl4ZWxzKCk7XG4gICAgICAgIEJsdWVKdW1wR2FtZS5icmlja2Jsb2NrMFswXS5sb2FkUGl4ZWxzKCk7XG4gICAgICAgIEJsdWVKdW1wR2FtZS5icmlja2Jsb2NrMVswXS5sb2FkUGl4ZWxzKCk7XG4gICAgICAgIEJsdWVKdW1wR2FtZS50cmFuc2l0aW9uWzBdLmxvYWRQaXhlbHMoKTtcbiAgICAgICAgQmx1ZUp1bXBHYW1lLmdyYXZlWzBdLmxvYWRQaXhlbHMoKTtcbiAgICAgICAgLy8gc3ByaXRlc1xuICAgICAgICBCbHVlSnVtcEdhbWUuYmx1ZUd1eTAyWzBdLmxvYWRQaXhlbHMoKTtcbiAgICAgICAgQmx1ZUp1bXBHYW1lLmJsdWVHdXkwM1swXS5sb2FkUGl4ZWxzKCk7XG4gICAgICAgIEJsdWVKdW1wR2FtZS5ibHVlR3V5MDRbMF0ubG9hZFBpeGVscygpO1xuICAgICAgICBCbHVlSnVtcEdhbWUubGF2YVswXS5sb2FkUGl4ZWxzKCk7XG4gICAgfVxuXG4gICAgX3NldEdhbWVNb2RlKG1vZGUpIHtcbiAgICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgICAgICBjYXNlIC0xOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU1vZGUgPSAtMTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVNb2RlID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllci5zaG91bGRVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU1vZGUgPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2hhbmRsZUdhbWVNb2RlKG1vZGUpIHtcbiAgICAgICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgaWYgKCEoQmx1ZUp1bXBHYW1lLklTX1NBRkFSSSB8fCAvLyBUT0RPOiBzcGxpdCBvZmZcbiAgICAgICAgICAgICAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5wcmVmaXgoZG9jdW1lbnQsIFwiRnVsbFNjcmVlblwiKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgQmx1ZUp1bXBHYW1lLnByZWZpeChkb2N1bWVudCwgXCJJc0Z1bGxTY3JlZW5cIikpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBpbiBmdWxsc2NyZWVuIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0R2FtZU1vZGUoLTEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZ1bGxTY3JlZW5BY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJhcnJpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmFycmllcnNbaV0udXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYXllci5zaG91bGRVcGRhdGUgJiYgdGhpcy5mdWxsU2NyZWVuQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgLTE6XG4gICAgICAgICAgICAgICAgbm9TdHJva2UoKTtcbiAgICAgICAgICAgICAgICBmaWxsKCdyZ2JhKDAsMCwwLDAuOCknKTsgLy8gVE9ETzogaXMgdGhlcmUgYW4gYWN0dWFsIGZ1bmN0aW9uIGZvciB0aGlzP1xuICAgICAgICAgICAgICAgIHJlY3QoMCwgMCwgd2luZG93LnNjcmVlbi53aWR0aCwgKEJsdWVKdW1wR2FtZS5JU19TQUZBUkkgPyB3aW5kb3dIZWlnaHQgOiB3aW5kb3cuc2NyZWVuLmhlaWdodCkpO1xuICAgICAgICAgICAgICAgIGZpbGwoMjAwLCAyMDAsIDApO1xuICAgICAgICAgICAgICAgIHN0cm9rZVdlaWdodChCbHVlSnVtcEdhbWUuQVJST1dfU0NBTEUgKiAwLjEyNSk7XG4gICAgICAgICAgICAgICAgc3Ryb2tlKDI1NSk7XG4gICAgICAgICAgICAgICAgLy8gZHJhdyBhbiBhcnJvdyBwb2ludGluZyB0byBcInBsYXlcIiBidXR0b25cbiAgICAgICAgICAgICAgICB0aGlzLl9zaG93SW5zdHJ1Y3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogY2xlYW51cFxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImRlcHJlY2F0ZWQgZ2FtZU1vZGUgZGV0ZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgbm9TdHJva2UoKTtcbiAgICAgICAgICAgICAgICBmaWxsKFwicmdiYSgwLCAwLCAwLCAwLjQpXCIpOyAvLyBUT0RPOiBpcyB0aGVyZSBhbiBhY3R1YWwgZnVuY3Rpb24gZm9yIHRoaXM/XG4gICAgICAgICAgICAgICAgcmVjdCgwLCAwLCB3aW5kb3cuc2NyZWVuLndpZHRoLCAoQmx1ZUp1bXBHYW1lLklTX1NBRkFSSSA/IHdpbmRvd0hlaWdodCA6IHdpbmRvdy5zY3JlZW4uaGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeG9mZiA9IHdpZHRoIC8gMiAtIDQuODcgKiBCbHVlSnVtcEdhbWUuVEVYVF9TSVpFO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5yZXR1cm5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0U2l6ZShCbHVlSnVtcEdhbWUuVEVYVF9TSVpFKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFsaWduKENFTlRFUik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmbG9vcihmcmFtZUNvdW50IC8gMikgJSA0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0KCdsb2FkaW5nJywgd2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmbG9vcihmcmFtZUNvdW50IC8gMikgJSA0ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0KCdsb2FkaW5nLicsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmxvb3IoZnJhbWVDb3VudCAvIDIpICUgNCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCgnbG9hZGluZy4uJywgd2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQoJ2xvYWRpbmcuLi4nLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsbCgyNTUsIDEyOCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHRleHRTaXplKEJsdWVKdW1wR2FtZS5URVhUX1NJWkUpO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0QWxpZ24oQ0VOVEVSKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dFNpemUoMC41ICogQmx1ZUp1bXBHYW1lLlRFWFRfU0laRSk7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbihMRUZUKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCgnIycsIHhvZmYsIDEuNyAqIEJsdWVKdW1wR2FtZS5URVhUX1NJWkUgKyAxMTUpO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0KCdQbGF5ZXInLCB4b2ZmICsgMS4yICogQmx1ZUp1bXBHYW1lLlRFWFRfU0laRSwgMS43ICogQmx1ZUp1bXBHYW1lLlRFWFRfU0laRSArIDExNSk7XG4gICAgICAgICAgICAgICAgICAgIHRleHQoJ1Njb3JlJywgeG9mZiArIDggKiBCbHVlSnVtcEdhbWUuVEVYVF9TSVpFLCAxLjcgKiBCbHVlSnVtcEdhbWUuVEVYVF9TSVpFICsgMTE1KTtcbiAgICAgICAgICAgICAgICAgICAgZmlsbCgyNTUsIDI1NSwgMjU1KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvd1JhbmtzKHhvZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zaG93SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICBwdXNoKCk7XG4gICAgICAgIHRyYW5zbGF0ZSgxMDAsIDMwKTtcbiAgICAgICAgYmVnaW5TaGFwZSgpO1xuICAgICAgICB2ZXJ0ZXgoMCwgMCk7XG4gICAgICAgIHZlcnRleChcbiAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5BUlJPV19TQ0FMRSAqIDEuMDUsXG4gICAgICAgICAgICAwLjI3ICogQmx1ZUp1bXBHYW1lLkFSUk9XX1NDQUxFXG4gICAgICAgICk7XG4gICAgICAgIHZlcnRleChcbiAgICAgICAgICAgIDAuNjIgKiBCbHVlSnVtcEdhbWUuQVJST1dfU0NBTEUsXG4gICAgICAgICAgICAwLjU1ICogQmx1ZUp1bXBHYW1lLkFSUk9XX1NDQUxFXG4gICAgICAgICk7XG4gICAgICAgIHZlcnRleChcbiAgICAgICAgICAgIDEuNjUgKiBCbHVlSnVtcEdhbWUuQVJST1dfU0NBTEUsXG4gICAgICAgICAgICAyLjA4NSAqIEJsdWVKdW1wR2FtZS5BUlJPV19TQ0FMRVxuICAgICAgICApO1xuICAgICAgICB2ZXJ0ZXgoXG4gICAgICAgICAgICAxLjE4ICogQmx1ZUp1bXBHYW1lLkFSUk9XX1NDQUxFLFxuICAgICAgICAgICAgMi40MSAqIEJsdWVKdW1wR2FtZS5BUlJPV19TQ0FMRVxuICAgICAgICApO1xuICAgICAgICB2ZXJ0ZXgoXG4gICAgICAgICAgICAwLjE4ICogQmx1ZUp1bXBHYW1lLkFSUk9XX1NDQUxFLFxuICAgICAgICAgICAgMC43OSAqIEJsdWVKdW1wR2FtZS5BUlJPV19TQ0FMRVxuICAgICAgICApO1xuICAgICAgICB2ZXJ0ZXgoXG4gICAgICAgICAgICAtMC4yNSAqIEJsdWVKdW1wR2FtZS5BUlJPV19TQ0FMRSxcbiAgICAgICAgICAgIEJsdWVKdW1wR2FtZS5BUlJPV19TQ0FMRVxuICAgICAgICApO1xuICAgICAgICBlbmRTaGFwZShDTE9TRSk7XG4gICAgICAgIHBvcCgpO1xuICAgICAgICB0ZXh0QWxpZ24oTEVGVCk7XG4gICAgICAgIHRleHRTaXplKEJsdWVKdW1wR2FtZS5URVhUX1NJWkUpO1xuICAgICAgICBmaWxsKDApO1xuICAgICAgICB0ZXh0KFwiUExBWVwiLCAxMDAsIDMwICsgMyAqIEJsdWVKdW1wR2FtZS5BUlJPV19TQ0FMRSk7XG4gICAgICAgIHN0cm9rZVdlaWdodChCbHVlSnVtcEdhbWUuQVJST1dfU0NBTEUgKiAwLjA2NzUpO1xuICAgICAgICB0ZXh0U2l6ZSgwLjUgKiBCbHVlSnVtcEdhbWUuVEVYVF9TSVpFKTtcbiAgICAgICAgdGV4dChCbHVlSnVtcEdhbWUuQ09OVFJPTFNfTVNHLCA0MCwgNCAqIEJsdWVKdW1wR2FtZS5BUlJPV19TQ0FMRSk7XG4gICAgICAgIHRleHQoQmx1ZUp1bXBHYW1lLlRJUCwgNDAsIDQuNyAqIEJsdWVKdW1wR2FtZS5BUlJPV19TQ0FMRSk7XG4gICAgfVxuXG4gICAgcGxheSgpIHtcbiAgICAgICAgaWYgKCFCbHVlSnVtcEdhbWUucHJlZml4KGRvY3VtZW50LCAnRnVsbFNjcmVlbicpICYmXG4gICAgICAgICAgICAhQmx1ZUp1bXBHYW1lLnByZWZpeChkb2N1bWVudCwgJ0lzRnVsbFNjcmVlbicpKSB7XG4gICAgICAgICAgICBCbHVlSnVtcEdhbWUucHJlZml4KFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWZhdWx0Q2FudmFzMCcpLFxuICAgICAgICAgICAgICAgICdSZXF1ZXN0RnVsbFNjcmVlbidcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2FtZU1vZGUgIT09IDEpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZnVsbFNjcmVlbkFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0R2FtZU1vZGUoMCk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIDEwMDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3BpY2tOZXdIaWdoZXN0KG9sZFBvcywgcGlja1JhbmRvbSwgaW5TaWdodCkgeyAvLyBUT0RPOiByZWZhY3RvclxuICAgICAgICBsZXQgaCwgdHh0cjtcbiAgICAgICAgaWYgKHRoaXMucGxheWVyLnN0YXRzLmFsaXZlKSB7XG4gICAgICAgICAgICB0eHRyID0gQmx1ZUp1bXBHYW1lLmRpcnRibG9jaztcbiAgICAgICAgICAgIGggPSA0NjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4yNSkge1xuICAgICAgICAgICAgICAgIHR4dHIgPSBCbHVlSnVtcEdhbWUuYnJpY2tibG9jazA7XG4gICAgICAgICAgICAgICAgaCA9IDQ2O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0eHRyID0gQmx1ZUp1bXBHYW1lLmJyaWNrYmxvY2sxO1xuICAgICAgICAgICAgICAgIGggPSAzMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBpY2tSYW5kb20pIHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBNYXRoLmZsb29yKHRoaXMucGxheWVyLnN0YXRzLnNjb3JlIC8gMjUwMCkgKiAwLjAyICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEU7XG4gICAgICAgICAgICBkaWZmaWN1bHR5ID0gY29uc3RyYWluKGRpZmZpY3VsdHksIDAsIDAuNSAqIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN0ciA9IEJsdWVKdW1wR2FtZS5NT0JJTEVfQ09OVFJPTFMgPyAwLjUgOiAwLjgwO1xuICAgICAgICAgICAgY29uc3QgZGlyID0gTWF0aC5yYW5kb20oKSA8IDAuNSA/IDEgOiAtMTtcbiAgICAgICAgICAgIGNvbnN0IG1heFkgPSAwLjUgKiAoQmx1ZUp1bXBHYW1lLkpVTVBfUE9XRVIgKiBCbHVlSnVtcEdhbWUuSlVNUF9QT1dFUiArIEJsdWVKdW1wR2FtZS5KVU1QX1BPV0VSKSAvIEJsdWVKdW1wR2FtZS5HUkFWSVRZO1xuICAgICAgICAgICAgY29uc3QgbWF4WCA9IDEuNyAqIEJsdWVKdW1wR2FtZS5KVU1QX1BPV0VSICogQmx1ZUp1bXBHYW1lLkhPUklaT05UQUxfU1BFRUQgKiBjb25zdHIgKiAxLjIgKyBkaWZmaWN1bHR5O1xuICAgICAgICAgICAgbWF4WCA9IGNvbnN0cmFpbihtYXhYLCAwLCB3aWR0aCk7XG4gICAgICAgICAgICBjb25zdCBpbmNyZWFzZVkgPSAoMC4zICsgMC43ICogTWF0aC5yYW5kb20oKSkgKiBtYXhZO1xuICAgICAgICAgICAgY29uc3QgbmV3WCA9IGNvbnN0cmFpbihvbGRQb3MueCArIGRpciAqICgwLjMgKyAwLjcgKiBNYXRoLnJhbmRvbSgpKSAqIG1heFgsIEJsdWVKdW1wR2FtZS5NT1ZFTUVOVCwgd2lkdGggLSBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSAtIEJsdWVKdW1wR2FtZS5NT1ZFTUVOVCk7XG4gICAgICAgICAgICB0aGlzLmJhcnJpZXJzLnB1c2gobmV3IEJhcnJpZXIobmV3WCwgb2xkUG9zLnkgLSBpbmNyZWFzZVksIDEsIC0zICsgNiAqIE1hdGgucmFuZG9tKCkgKiBjb25zdHIsIDAsIDAsIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFLCAwLjI1ICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUsIG5ldyBTcHJpdGUodHh0clswXSwgdHh0clsxXSwgdHh0clsyXSwgdHh0clszXSwgdHh0cls0XSwgdHh0cls1XSwgdHh0cls2XSksIDE1MCwgaCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgeCA9IDEwICsgTWF0aC5yYW5kb20oKSAqICh3aWR0aCAtIDExMCk7XG4gICAgICAgICAgICBjb25zdCB5ID0gaW5TaWdodCA/IC0yMDAgKyBNYXRoLnJhbmRvbSgpICogKChCbHVlSnVtcEdhbWUuSVNfU0FGQVJJID8gd2luZG93SGVpZ2h0IDogd2luZG93LnNjcmVlbi5oZWlnaHQpICsgMjAwKSA6IC0yMDAgKyBNYXRoLnJhbmRvbSgpICogMTc1O1xuICAgICAgICAgICAgY29uc3QgeiA9IDIgKyBNYXRoLnJhbmRvbSgpICogMS4xO1xuICAgICAgICAgICAgdGhpcy5mYWtlQmFycmllcnMucHVzaChuZXcgQmFycmllcih4LCB5LCB6LCAwLCAwLCAwLCBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSwgMC4yNSAqIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFLCBuZXcgU3ByaXRlKHR4dHJbMF0sIHR4dHJbMV0gLyB6LCB0eHRyWzJdIC8geiwgdHh0clszXSwgdHh0cls0XSwgdHh0cls1XSwgdHh0cls2XSksIDE1MCwgaCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGV2aWNlT3JpZW50YXRpb25IYW5kbGVyKGUpIHtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IGUuZ2FtbWE7XG4gICAgICAgIHRoaXMub3JpZW50ZWRNb3ZlbWVudCA9IGUuZ2FtbWEgKiAwLjAyMDQ0NDtcbiAgICB9XG5cbiAgICBzdGF0aWMgcHJlZml4KG9iaiwgbWV0aG9kKSB7XG4gICAgICAgIGxldCBwID0gMCxcbiAgICAgICAgICAgIG0sIHQ7XG4gICAgICAgIHdoaWxlIChwIDwgQmx1ZUp1bXBHYW1lLnBmeC5sZW5ndGggJiYgIW9ialttXSkge1xuICAgICAgICAgICAgbSA9IG1ldGhvZDtcbiAgICAgICAgICAgIGlmIChCbHVlSnVtcEdhbWUucGZ4W3BdID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgbSA9IG0uc3Vic3RyKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBtLnN1YnN0cigxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG0gPSBCbHVlSnVtcEdhbWUucGZ4W3BdICsgbTtcbiAgICAgICAgICAgIHQgPSB0eXBlb2Ygb2JqW21dO1xuICAgICAgICAgICAgaWYgKHQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICBCbHVlSnVtcEdhbWUucGZ4ID0gW0JsdWVKdW1wR2FtZS5wZnhbcF1dO1xuICAgICAgICAgICAgICAgIHJldHVybiAodCA9PT0gXCJmdW5jdGlvblwiID8gb2JqW21dKCkgOiBvYmpbbV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcCsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGlzTW9iaWxlRGV2aWNlKCkge1xuICAgICAgICBsZXQgY2hlY2sgPSBmYWxzZTtcbiAgICAgICAgKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICBpZiAoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWlub3xhbmRyb2lkfGlwYWR8cGxheWJvb2t8c2lsay9pLnRlc3QoYSkgfHwgLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdChhLnN1YnN0cigwLCA0KSkpIGNoZWNrID0gdHJ1ZVxuICAgICAgICB9KShuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhKTtcbiAgICAgICAgcmV0dXJuIGNoZWNrO1xuICAgIH1cbn1cblxuQmx1ZUp1bXBHYW1lLkFVVE9KVU1QID0gdHJ1ZTtcbkJsdWVKdW1wR2FtZS5ERUJVRyA9IHRydWU7XG5CbHVlSnVtcEdhbWUuTEVWRUxDUkVBVElPTiA9IHRydWU7XG5CbHVlSnVtcEdhbWUuTEFORElOR19USFJFU0hPTEQgPSAyNTtcbkJsdWVKdW1wR2FtZS5IT1JJWk9OVEFMX1NQRUVEID0gMTE7XG5CbHVlSnVtcEdhbWUuR1JBVklUWSA9IDE7XG5CbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSA9IDAuMDcgKiB3aW5kb3cuc2NyZWVuLndpZHRoO1xuQmx1ZUp1bXBHYW1lLkFSUk9XX1NDQUxFID0gMC4wNiAqIHdpbmRvdy5zY3JlZW4ud2lkdGg7XG5CbHVlSnVtcEdhbWUuTU9WRU1FTlQgPSAwLjc1ICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEU7XG5CbHVlSnVtcEdhbWUuQkFDS0dST1VORF9TSEFERVMgPSAxMztcbkJsdWVKdW1wR2FtZS5NQVhfQkFSUklFUlMgPSAxMjsgLy8gbWF4aW11bSBhbW91bnQgb2YgKGZha2UpIGJhcnJpZXJzXG5CbHVlSnVtcEdhbWUuQ09OVFJPTFNfTVNHID0gJyc7XG5CbHVlSnVtcEdhbWUuVElQID0gJyc7XG5CbHVlSnVtcEdhbWUuTU9CSUxFX0NPTlRST0xTID0gQmx1ZUp1bXBHYW1lLmlzTW9iaWxlRGV2aWNlKCk7XG5CbHVlSnVtcEdhbWUuSlVNUF9QT1dFUjtcbkJsdWVKdW1wR2FtZS5URVhUX1NJWkUgPSBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSAqIDAuNTtcbkJsdWVKdW1wR2FtZS5GT05UO1xuQmx1ZUp1bXBHYW1lLnBmeCA9IFtcIndlYmtpdFwiLCBcIm1velwiLCBcIm1zXCIsIFwib1wiLCBcIlwiXTtcbkJsdWVKdW1wR2FtZS5maWVsZDtcbkJsdWVKdW1wR2FtZS5JU19TQUZBUkkgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nXG4gICAgLmNhbGwod2luZG93LkhUTUxFbGVtZW50KS5pbmRleE9mKCdDb25zdHJ1Y3RvcicpID4gMDtcbi8vIGxvYWQgYXNzZXRzXG5CbHVlSnVtcEdhbWUuZGlydGJsb2NrID0gW1xuICAgIG51bGwsIC8vIHdpbGwgYmUgcG9wdWxhdGVkIGxhdGVyIC0gc2VlIHByZWxvYWQoKVxuICAgIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFLFxuICAgIDAuMjUgKiBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSxcbiAgICAxLFxuICAgIGZhbHNlLFxuICAgIDAsXG4gICAgMFxuXTtcbkJsdWVKdW1wR2FtZS5zcGlrZXMgPSBbXG4gICAgbnVsbCwgLy8gd2lsbCBiZSBwb3B1bGF0ZWQgbGF0ZXIgLSBzZWUgcHJlbG9hZCgpXG4gICAgNSAvIDMgKiBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSxcbiAgICAwLjUxMyAqIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFLFxuICAgIDEsXG4gICAgZmFsc2UsXG4gICAgMCxcbiAgICAwXG5dO1xuQmx1ZUp1bXBHYW1lLmxhdmEgPSBbXG4gICAgbnVsbCwgLy8gd2lsbCBiZSBwb3B1bGF0ZWQgbGF0ZXIgLSBzZWUgcHJlbG9hZCgpXG4gICAgNSAvIDMgKiBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSxcbiAgICAwLjU1OCAqIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFLFxuICAgIDUsXG4gICAgdHJ1ZSxcbiAgICAwLFxuICAgIDBcbl07XG5CbHVlSnVtcEdhbWUuYnJpY2tibG9jazAgPSBbXG4gICAgbnVsbCwgLy8gd2lsbCBiZSBwb3B1bGF0ZWQgbGF0ZXIgLSBzZWUgcHJlbG9hZCgpXG4gICAgQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUsXG4gICAgMC4yNSAqIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFLFxuICAgIDEsXG4gICAgZmFsc2UsXG4gICAgMCxcbiAgICAwXG5dO1xuQmx1ZUp1bXBHYW1lLmJyaWNrYmxvY2sxID0gW1xuICAgIG51bGwsIC8vIHdpbGwgYmUgcG9wdWxhdGVkIGxhdGVyIC0gc2VlIHByZWxvYWQoKVxuICAgIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFLFxuICAgIDAuMjUgKiBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSxcbiAgICAxLFxuICAgIGZhbHNlLFxuICAgIDAsXG4gICAgMFxuXTtcbkJsdWVKdW1wR2FtZS5ibHVlR3V5MDIgPSBbXG4gICAgbnVsbCwgLy8gd2lsbCBiZSBwb3B1bGF0ZWQgbGF0ZXIgLSBzZWUgcHJlbG9hZCgpXG4gICAgMiAqIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFIC8gMyxcbiAgICAyICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUgLyAzLFxuICAgIDcsXG4gICAgdHJ1ZSxcbiAgICAxOCxcbiAgICAxOFxuXTtcbkJsdWVKdW1wR2FtZS5ibHVlR3V5MDMgPSBbXG4gICAgbnVsbCwgLy8gd2lsbCBiZSBwb3B1bGF0ZWQgbGF0ZXIgLSBzZWUgcHJlbG9hZCgpXG4gICAgMiAqIEJsdWVKdW1wR2FtZS5CQVJSSUVSX1NDQUxFIC8gMyxcbiAgICAyICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUgLyAzLFxuICAgIDEwLFxuICAgIGZhbHNlLFxuICAgIDE5LFxuICAgIDE5XG5dO1xuQmx1ZUp1bXBHYW1lLmJsdWVHdXkwNCA9IFtcbiAgICBudWxsLCAvLyB3aWxsIGJlIHBvcHVsYXRlZCBsYXRlciAtIHNlZSBwcmVsb2FkKClcbiAgICAyICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUgLyAzLFxuICAgIDIgKiBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSAvIDMsXG4gICAgNixcbiAgICBmYWxzZSxcbiAgICAxOSxcbiAgICAxOVxuXTtcbkJsdWVKdW1wR2FtZS50cmFuc2l0aW9uID0gW1xuICAgIG51bGwsIC8vIHdpbGwgYmUgcG9wdWxhdGVkIGxhdGVyIC0gc2VlIHByZWxvYWQoKVxuICAgIDIgKiBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSAvIDMsXG4gICAgMi4yICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUgLyAzLFxuICAgIDEsXG4gICAgZmFsc2UsXG4gICAgMCxcbiAgICAwXG5dO1xuQmx1ZUp1bXBHYW1lLmdyYXZlID0gW1xuICAgIG51bGwsIC8vIHdpbGwgYmUgcG9wdWxhdGVkIGxhdGVyIC0gc2VlIHByZWxvYWQoKVxuICAgIDIgKiBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSAvIDMsXG4gICAgMi4yICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUgLyAzLFxuICAgIDEsXG4gICAgZmFsc2UsXG4gICAgMCxcbiAgICAwXG5dO1xuIiwiY2xhc3MgRmxvb3Ige1xuICAgIGNvbnN0cnVjdG9yKGltZywgZGlzcGxheVdpZHRoLCBkaXNwbGF5SGVpZ2h0LCBmcmFtZXNDb3VudCwgYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuc3ByaXRlID0gbmV3IFNwcml0ZShcbiAgICAgICAgICAgIGltZywgZGlzcGxheVdpZHRoLCBkaXNwbGF5SGVpZ2h0LCBmcmFtZXNDb3VudCwgYWN0aW9uLCAwLCAwLCAzMFxuICAgICAgICApO1xuICAgICAgICB0aGlzLnJlcGVhdHMgPSBNYXRoLmNlaWwod2luZG93LnNjcmVlbi53aWR0aCAvIGRpc3BsYXlXaWR0aCk7XG4gICAgfVxuXG4gICAgc2hvdyhvcmlnV2lkdGgsIG9yaWdIZWlnaHQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlcGVhdHM7IGkrKylcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlLnNob3coXG4gICAgICAgICAgICAgICAgaSAqIHRoaXMuc3ByaXRlLmRpc3BsYXlXaWR0aCxcbiAgICAgICAgICAgICAgICAoQmx1ZUp1bXBHYW1lLklTX1NBRkFSSSA/IHdpbmRvd0hlaWdodCA6IHdpbmRvdy5zY3JlZW4uaGVpZ2h0KSAtIHRoaXMuc3ByaXRlLmRpc3BsYXlIZWlnaHQsXG4gICAgICAgICAgICAgICAgb3JpZ1dpZHRoLFxuICAgICAgICAgICAgICAgIG9yaWdIZWlnaHRcbiAgICAgICAgICAgICk7XG4gICAgfVxufVxuIiwiY2xhc3MgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5KSB7XG4gICAgICAgIHRoaXMuaGlnaGVzdFkgPSB5O1xuICAgICAgICB0aGlzLmJ1cmllZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNob3VsZFVwZGF0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaW5pdGlhbFAgPSB7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnAgPSB7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgeTogeVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnYgPSB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmEgPSB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogQmx1ZUp1bXBHYW1lLkdSQVZJVFlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGF0cyA9IHtcbiAgICAgICAgICAgIHNjb3JlOiAwLFxuICAgICAgICAgICAgcGl4ZWxzVHJhdmVyc2VkOiAwLFxuICAgICAgICAgICAgYmFycmllcnNKdW1wZWQ6IDAsXG4gICAgICAgICAgICBhbGl2ZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFjdGl2aXR5ID0gMDtcbiAgICAgICAgdGhpcy5hY3Rpdml0aWVzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAyOyBpIDw9IDY7IGkrKykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbaV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpdml0aWVzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTcHJpdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbaV1bMF0sIGFyZ3VtZW50c1tpXVsxXSwgYXJndW1lbnRzW2ldWzJdLCBhcmd1bWVudHNbaV1bM10sIGFyZ3VtZW50c1tpXVs0XSwgYXJndW1lbnRzW2ldWzVdLCBhcmd1bWVudHNbaV1bNl1cbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy53YWxrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2aXR5ID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mYWxsaW5nID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBmYWxsKCkge1xuICAgICAgICB0aGlzLmZhbGxpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmEueSA9IEJsdWVKdW1wR2FtZS5HUkFWSVRZO1xuICAgIH1cblxuICAgIHN0YW5kKCkge1xuICAgICAgICB0aGlzLmFjdGl2aXR5ID0gMDtcbiAgICB9XG5cbiAgICBnZXRUcmF2ZXJzZWRQaXhlbHMoKSB7XG4gICAgICAgIHRoaXMuaGlnaGVzdFkgPSB0aGlzLmhpZ2hlc3RZID4gdGhpcy5wLnkgPyB0aGlzLnAueSA6IHRoaXMuaGlnaGVzdFk7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHRoaXMuc3RhdHMucGl4ZWxzVHJhdmVyc2VkICsgdGhpcy5pbml0aWFsUC55IC0gdGhpcy5oaWdoZXN0WSk7XG4gICAgfVxuXG4gICAgZ2V0U2NvcmUoKSB7XG4gICAgICAgIGNvbnN0IHMgPSAzICogdGhpcy5nZXRUcmF2ZXJzZWRQaXhlbHMoKSArIDQwMCAqICh0aGlzLnN0YXRzLmJhcnJpZXJzSnVtcGVkIC0gMSkgKiAwLjc7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHMpO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKChCbHVlSnVtcEdhbWUuQVVUT0pVTVAgfHwga2V5RG93bigzMikpICYmICF0aGlzLmZhbGxpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuanVtcCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRzLmFsaXZlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52LnggPSAwO1xuICAgICAgICBpZiAoQmx1ZUp1bXBHYW1lLk1PQklMRV9DT05UUk9MUykgeyAvLyBtb2JpbGUgY29udHJvbHNcbiAgICAgICAgICAgIHRoaXMudi54ID0gQmx1ZUp1bXBHYW1lLkhPUklaT05UQUxfU1BFRUQgKiBvcmllbnRlZE1vdmVtZW50O1xuICAgICAgICB9IGVsc2UgeyAvLyBrZXlib2FyZCBjb250cm9sc1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChrZXlEb3duKDM3KSB8fCBrZXlEb3duKCdhJykpICE9PSAoa2V5RG93bigzOSkgfHwga2V5RG93bignZCcpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHMuYWxpdmUpIHRoaXMud2FsaygpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlEb3duKDM3KSB8fCBrZXlEb3duKCdhJykpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudi54ID0gLUJsdWVKdW1wR2FtZS5IT1JJWk9OVEFMX1NQRUVEO1xuICAgICAgICAgICAgICAgIGVsc2UgdGhpcy52LnggPSBCbHVlSnVtcEdhbWUuSE9SSVpPTlRBTF9TUEVFRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnAueCA9IGNvbnN0cmFpbih0aGlzLnAueCArIHRoaXMudi54LCAwLCB3aWR0aCAtIHRoaXMuYWN0aXZpdGllc1t0aGlzLmFjdGl2aXR5XS53aWR0aCk7XG4gICAgICAgIHRoaXMucC55ID0gY29uc3RyYWluKHRoaXMucC55ICsgdGhpcy52LnksIDAsIGhlaWdodCAtIHRoaXMuYWN0aXZpdGllc1t0aGlzLmFjdGl2aXR5XS5oZWlnaHQpO1xuICAgICAgICB0aGlzLnYueCArPSB0aGlzLmEueDtcbiAgICAgICAgdGhpcy52LnkgKz0gdGhpcy5hLnk7XG4gICAgICAgIGlmICh0aGlzLnAueSA8IGhlaWdodCAvIDMpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4Y2VlZGFuY2UgPSBoZWlnaHQgLyAzIC0gdGhpcy5wLnk7XG4gICAgICAgICAgICB0aGlzLnN0YXRzLnBpeGVsc1RyYXZlcnNlZCArPSBleGNlZWRhbmNlO1xuICAgICAgICAgICAgdGhpcy5wLnkgPSBoZWlnaHQgLyAzO1xuICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBiai5iYXJyaWVycy5sZW5ndGg7IGIrKykge1xuICAgICAgICAgICAgICAgIGJqLmJhcnJpZXJzW2JdLnAueSArPSBleGNlZWRhbmNlO1xuICAgICAgICAgICAgICAgIGlmIChiai5iYXJyaWVyc1tiXS5wLnkgPj0gaGVpZ2h0IC0gNDApXG4gICAgICAgICAgICAgICAgICAgIGJqLmJhcnJpZXJzLnNwbGljZShiLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGZiID0gMDsgZmIgPCBmYWtlQmFycmllcnMubGVuZ3RoOyBmYisrKSB7XG4gICAgICAgICAgICAgICAgZmFrZUJhcnJpZXJzW2ZiXS5wLnkgKz0gZXhjZWVkYW5jZSAvIGZha2VCYXJyaWVyc1tmYl0ucC56O1xuICAgICAgICAgICAgICAgIGlmIChmYWtlQmFycmllcnNbZmJdLnAueSA+PSBoZWlnaHQgLSA1MClcbiAgICAgICAgICAgICAgICAgICAgZmFrZUJhcnJpZXJzLnNwbGljZShmYiwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hLnkgPSBCbHVlSnVtcEdhbWUuR1JBVklUWTtcbiAgICAgICAgaWYgKHRoaXMucC55ICsgdGhpcy5hY3Rpdml0aWVzW3RoaXMuYWN0aXZpdHldLmhlaWdodCA+PSBoZWlnaHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRzLmFsaXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYW5kKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaWUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLmJ1cnkoKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IGJhcnJpZXJzLmxlbmd0aDsgYisrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb2xsaWRlKGJhcnJpZXJzW2JdKSkge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wLnkgKyB0aGlzLmFjdGl2aXRpZXNbdGhpcy5hY3Rpdml0eV0uaGVpZ2h0ID49IGJhcnJpZXJzW2JdLnAueSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnAueSArIHRoaXMuYWN0aXZpdGllc1t0aGlzLmFjdGl2aXR5XS5oZWlnaHQgLSBiYXJyaWVyc1tiXS5wLnkgPD0gTEFORElOR19USFJFU0hPTEQgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52LnkgPiAwXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFuZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhcnJpZXJzW2JdLnAueSAtIHRoaXMuYWN0aXZpdGllc1t0aGlzLmFjdGl2aXR5XS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXJyaWVyc1tiXS52LnhcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYXJyaWVyc1tiXS5qdW1wZWQpIHRoaXMuc3RhdHMuYmFycmllcnNKdW1wZWQrKztcbiAgICAgICAgICAgICAgICAgICAgYmFycmllcnNbYl0uanVtcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0cy5zY29yZSA9IHRoaXMuZ2V0U2NvcmUoKTtcbiAgICB9XG5cbiAgICBqdW1wKEYpIHtcbiAgICAgICAgY29uc3QgcG93ZXIgPSB0eXBlb2YgRiAhPT0gJ3VuZGVmaW5lZCcgPyBGIDogQmx1ZUp1bXBHYW1lLkpVTVBfUE9XRVI7XG4gICAgICAgIHRoaXMuZmFsbCgpO1xuICAgICAgICB0aGlzLnYueSAtPSBwb3dlcjtcbiAgICB9XG5cbiAgICBsYW5kKHksIGRYKSB7XG4gICAgICAgIHRoaXMuZmFsbGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmEueSA9IDA7XG4gICAgICAgIHRoaXMudi55ID0gMDtcbiAgICAgICAgaWYgKHR5cGVvZiB5ICE9PSAndW5kZWZpbmVkJykgdGhpcy5wLnkgPSB5O1xuICAgICAgICBpZiAodHlwZW9mIGRYICE9PSAndW5kZWZpbmVkJykgdGhpcy5wLnggKz0gMiAqIGRYO1xuICAgIH1cblxuICAgIGNvbGxpZGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnAueCArIHRoaXMuYWN0aXZpdGllc1t0aGlzLmFjdGl2aXR5XS53aWR0aCAtIHRoaXMuYWN0aXZpdGllc1t0aGlzLmFjdGl2aXR5XS5wYWRkaW5nLnJpZ2h0ID49IHRhcmdldC5wLnggJiZcbiAgICAgICAgICAgIHRoaXMucC54ICsgdGhpcy5hY3Rpdml0aWVzW3RoaXMuYWN0aXZpdHldLnBhZGRpbmcubGVmdCA8PSB0YXJnZXQucC54ICsgdGFyZ2V0LndpZHRoICYmXG4gICAgICAgICAgICB0aGlzLnAueSArIHRoaXMuYWN0aXZpdGllc1t0aGlzLmFjdGl2aXR5XS5oZWlnaHQgPj0gdGFyZ2V0LnAueSAmJlxuICAgICAgICAgICAgdGhpcy5wLnkgPD0gdGFyZ2V0LnAueSArIHRhcmdldC5oZWlnaHQ7XG4gICAgfVxuXG4gICAgZGllKCkge1xuICAgICAgICB0aGlzLnNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFjdGl2aXR5ID0gMztcbiAgICAgICAgdGhpcy5wLnkgPSAoQmx1ZUp1bXBHYW1lLklTX1NBRkFSSSA/IHdpbmRvd0hlaWdodCA6IHdpbmRvdy5zY3JlZW4uaGVpZ2h0KSAtIDMgKiBCbHVlSnVtcEdhbWUuQkFSUklFUl9TQ0FMRSAvIDM7XG4gICAgICAgIHRleHRBbmltYXRpb25zLnB1c2goXG4gICAgICAgICAgICBuZXcgVGV4dEFuaW1hdGlvbigzLCB3aWR0aCAqIDAuOCwgMiAqIEJsdWVKdW1wR2FtZS5URVhUX1NJWkUsIGZyYW1lUmF0ZSgpIC8gMywgMiAqIGZyYW1lUmF0ZSgpIC8gMywgWzAsIDAsIDBdLCBmcmFtZUNvdW50KVxuICAgICAgICApO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRleHRBbmltYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFRleHRBbmltYXRpb24oMiwgd2lkdGggKiAwLjgsIDIgKiBCbHVlSnVtcEdhbWUuVEVYVF9TSVpFLCBmcmFtZVJhdGUoKSAvIDMsIDIgKiBmcmFtZVJhdGUoKSAvIDMsIFswLCAwLCAwXSwgZnJhbWVDb3VudClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRleHRBbmltYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFRleHRBbmltYXRpb24oMSwgd2lkdGggKiAwLjgsIDIgKiBCbHVlSnVtcEdhbWUuVEVYVF9TSVpFLCBmcmFtZVJhdGUoKSAvIDMsIDIgKiBmcmFtZVJhdGUoKSAvIDMsIFswLCAwLCAwXSwgZnJhbWVDb3VudClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sIDIwMDApO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHMuYWxpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZpdHkgPSAyO1xuICAgICAgICAgICAgdGhpcy5qdW1wKDIuMiAqIEpVTVBfUE9XRVIpO1xuICAgICAgICAgICAgdGhpcy5zaG91bGRVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgdGV4dEFuaW1hdGlvbnMucHVzaChuZXcgVGV4dEFuaW1hdGlvbihcIlNFQ09ORCBDSEFOQ0UhXCIsIHdpZHRoICogMC44LCAxLjUgKiBCbHVlSnVtcEdhbWUuVEVYVF9TSVpFLCBmcmFtZVJhdGUoKSAvIDMsIDIgKiBmcmFtZVJhdGUoKSwgWzAsIDAsIDBdLCBmcmFtZUNvdW50KSk7XG4gICAgICAgIH0sIDMyMDApO1xuICAgIH1cblxuICAgIHJlc3VycmVjdCgpIHtcbiAgICAgICAgdGhpcy5zdGF0cy5hbGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYWN0aXZpdHkgPSAwO1xuICAgIH1cblxuICAgIGJ1cnkoKSB7XG4gICAgICAgIC8vIHB1c2hSYW5rKHRoaXMuc3RhdHMuc2NvcmUpO1xuICAgICAgICAvLyBnZXRSYW5rcygpO1xuICAgICAgICB0aGlzLnNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJ1cnlpbmcgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnAueSArPSAyO1xuICAgICAgICAgICAgaWYgKHRoaXMucC55ID49IChCbHVlSnVtcEdhbWUuSVNfU0FGQVJJID8gd2luZG93SGVpZ2h0IDogd2luZG93LnNjcmVlbi5oZWlnaHQpIC0gQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUgLyAzKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmJ1cnlpbmcpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZpdHkgPSA0O1xuICAgICAgICAgICAgICAgIHRoaXMuYnVyeWluZyA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wLnktLTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucC55IDw9IChCbHVlSnVtcEdhbWUuSVNfU0FGQVJJID8gd2luZG93SGVpZ2h0IDogd2luZG93LnNjcmVlbi5oZWlnaHQpIC0gMi43ICogQmx1ZUp1bXBHYW1lLkJBUlJJRVJfU0NBTEUgLyAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuYnVyeWluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0QW5pbWF0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBUZXh0QW5pbWF0aW9uKFwiR0FNRSBPVkVSIVwiLCB3aWR0aCAqIDAuOCwgMS41ICogdHh0U2l6ZSwgZnJhbWVSYXRlKCkgLyAzLCBJbmZpbml0eSwgWzAsIDAsIDBdLCBmcmFtZUNvdW50LCB3aWR0aCAvIDIsIDEwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lTW9kZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVyaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDEwMDAgLyBmcmFtZVJhdGUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMDAgLyBmcmFtZVJhdGUoKSk7XG4gICAgfVxufVxuIiwiY2xhc3MgU3ByaXRlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgaW1nLFxuICAgICAgICBkaXNwbGF5V2lkdGgsIGRpc3BsYXlIZWlnaHQsXG4gICAgICAgIGZyYW1lc0NvdW50LFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIHBhZGRpbmdMZWZ0LCBwYWRkaW5nUmlnaHQsXG4gICAgICAgIGZwc1NjYWxlXG4gICAgKSB7XG4gICAgICAgIHRoaXMuaW1nID0gaW1nO1xuICAgICAgICB0aGlzLmRpc3BsYXlXaWR0aCA9IGRpc3BsYXlXaWR0aDtcbiAgICAgICAgdGhpcy5kaXNwbGF5SGVpZ2h0ID0gZGlzcGxheUhlaWdodDtcbiAgICAgICAgdGhpcy5mcmFtZXNDb3VudCA9IGZyYW1lc0NvdW50O1xuICAgICAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZnBzU2NhbGUgPSB0eXBlb2YgZnBzU2NhbGUgPT09ICd1bmRlZmluZWQnID8gMiA6IGZwc1NjYWxlO1xuICAgICAgICB0aGlzLnBhZGRpbmcgPSB7XG4gICAgICAgICAgICBsZWZ0OiB0eXBlb2YgcGFkZGluZ0xlZnQgPT09ICd1bmRlZmluZWQnID8gMCA6IHBhZGRpbmdMZWZ0LFxuICAgICAgICAgICAgcmlnaHQ6IHR5cGVvZiBwYWRkaW5nUmlnaHQgPT09ICd1bmRlZmluZWQnID8gMCA6IHBhZGRpbmdSaWdodFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHNob3coeCwgeSwgb3JpZ1dpZHRoLCBvcmlnSGVpZ2h0KSB7XG4gICAgICAgIGxldCBmcmFtZUluZGV4ID1cbiAgICAgICAgICAgIE1hdGguZmxvb3IodGhpcy5jb3VudCAvIHRoaXMuZnBzU2NhbGUpICUgdGhpcy5mcmFtZXNDb3VudDtcbiAgICAgICAgY29uc3Qgc3JjV2lkdGggPSB0eXBlb2Ygb3JpZ1dpZHRoID09PSAndW5kZWZpbmVkJyA/IHRoaXMuZGlzcGxheVdpZHRoIDogb3JpZ1dpZHRoO1xuICAgICAgICBjb25zdCBzcmNIZWlnaHQgPSB0eXBlb2Ygb3JpZ0hlaWdodCA9PT0gJ3VuZGVmaW5lZCcgPyB0aGlzLmRpc3BsYXlIZWlnaHQgOiBvcmlnSGVpZ2h0O1xuICAgICAgICB0aGlzLmNvdW50Kys7XG4gICAgICAgIC8vIHBlcmZvcm0gdGhlIGFjdGlvbiAoc3VjaCBhcyBibGlua2luZylcbiAgICAgICAgaWYgKHRoaXMuYWN0aW9uICYmIGZyYW1lSW5kZXggPT09IHRoaXMuZnJhbWVzQ291bnQgLSAxICYmIE1hdGgucmFuZG9tKCkgPiAwLjI1KSB7XG4gICAgICAgICAgICBmcmFtZUluZGV4ID0gMDtcbiAgICAgICAgICAgIHRoaXMuY291bnQrKztcbiAgICAgICAgfVxuICAgICAgICBpbWFnZShcbiAgICAgICAgICAgIHRoaXMuaW1nLFxuICAgICAgICAgICAgeCwgeSxcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheVdpZHRoLCB0aGlzLmRpc3BsYXlIZWlnaHQsXG4gICAgICAgICAgICBmcmFtZUluZGV4ICogc3JjV2lkdGgsIDAsXG4gICAgICAgICAgICBzcmNXaWR0aCwgc3JjSGVpZ2h0XG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiY2xhc3MgVGV4dCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHRleHQsIGJlZ2luU2l6ZSwgZmluYWxTaXplLCB0cmFuc2l0aW9uLCBkZWxheSwgY29sb3VyLCBjcmVhdGlvbiwgeCwgeVxuICAgICkge1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLmZpbmFsU2l6ZSA9IGZpbmFsU2l6ZTtcbiAgICAgICAgdGhpcy5jdXJyZW50U2l6ZSA9IGJlZ2luU2l6ZSAtIChiZWdpblNpemUgJSBmaW5hbFNpemUpOyAvLyBUT0RPOiBjaGVjayB0aGlzXG4gICAgICAgIHRoaXMuZGVjcmVhc2UgPSAodGhpcy5jdXJyZW50U2l6ZSAtIHRoaXMuZmluYWxTaXplKSAvIHRyYW5zaXRpb247XG4gICAgICAgIHRoaXMudHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5jb2xvdXIgPSBjb2xvdXI7XG4gICAgICAgIHRoaXMuY3JlYXRpb24gPSBjcmVhdGlvbjtcbiAgICAgICAgdGhpcy54ID0gdHlwZW9mIHggPT09ICd1bmRlZmluZWQnID8gd2lkdGggLyAyIDogeDtcbiAgICAgICAgdGhpcy55ID0gdHlwZW9mIHkgPT09ICd1bmRlZmluZWQnID8gaGVpZ2h0IC8gMiA6IHk7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50U2l6ZSA+IHRoaXMuZmluYWxTaXplKSB0aGlzLmN1cnJlbnRTaXplIC09IHRoaXMuZGVjcmVhc2U7XG4gICAgfVxuXG4gICAgc2hvdygpIHtcbiAgICAgICAgdGV4dFNpemUodGhpcy5jdXJyZW50U2l6ZSk7XG4gICAgICAgIHRleHRBbGlnbihDRU5URVIpO1xuICAgICAgICBmaWxsKHRoaXMuY29sb3VyKTtcbiAgICAgICAgc3Ryb2tlKDI1NSk7XG4gICAgICAgIHN0cm9rZVdlaWdodCg2KTtcbiAgICAgICAgdGV4dCh0aGlzLnRleHQsIHRoaXMueCwgdGhpcy55KTtcbiAgICB9XG5cbiAgICBzaG91bGRCZURlbGV0ZWQoKSB7XG4gICAgICAgIHJldHVybiBmcmFtZUNvdW50IDw9IHRoaXMudHJhbnNpdGlvbiArIHRoaXMuZGVsYXkgKyB0aGlzLmNyZWF0aW9uO1xuICAgIH1cbn1cbiIsImxldCBiajtcblxuZnVuY3Rpb24gcHJlbG9hZCgpIHtcbiAgICAvLyBpbWFnZXNcbiAgICBCbHVlSnVtcEdhbWUuZGlydGJsb2NrWzBdID0gbG9hZEltYWdlKCdhc3NldHMvaW1nL2RpcnQwLnBuZycpO1xuICAgIEJsdWVKdW1wR2FtZS5zcGlrZXNbMF0gPSBsb2FkSW1hZ2UoJ2Fzc2V0cy9pbWcvc3Bpa2VzLnBuZycpO1xuICAgIEJsdWVKdW1wR2FtZS5icmlja2Jsb2NrMFswXSA9IGxvYWRJbWFnZSgnYXNzZXRzL2ltZy9icmlja3MwLnBuZycpO1xuICAgIEJsdWVKdW1wR2FtZS5icmlja2Jsb2NrMVswXSA9IGxvYWRJbWFnZSgnYXNzZXRzL2ltZy9icmlja3MxLnBuZycpO1xuICAgIEJsdWVKdW1wR2FtZS50cmFuc2l0aW9uWzBdID0gbG9hZEltYWdlKCdhc3NldHMvaW1nL3RyYW5zaXRpb24ucG5nJyk7XG4gICAgQmx1ZUp1bXBHYW1lLmdyYXZlWzBdID0gbG9hZEltYWdlKCdhc3NldHMvaW1nL2dyYXZlLnBuZycpO1xuICAgIC8vIHNwcml0ZXNcbiAgICBCbHVlSnVtcEdhbWUuYmx1ZUd1eTAyWzBdID0gbG9hZEltYWdlKCdhc3NldHMvaW1nL3Nwcml0ZXMvYm91bmNpbmcucG5nJyk7XG4gICAgQmx1ZUp1bXBHYW1lLmJsdWVHdXkwM1swXSA9IGxvYWRJbWFnZSgnYXNzZXRzL2ltZy9zcHJpdGVzL3dhbGtpbmcucG5nJyk7XG4gICAgQmx1ZUp1bXBHYW1lLmJsdWVHdXkwNFswXSA9IGxvYWRJbWFnZSgnYXNzZXRzL2ltZy9zcHJpdGVzL3VuZGVhZC5wbmcnKTtcbiAgICBCbHVlSnVtcEdhbWUubGF2YVswXSA9IGxvYWRJbWFnZSgnYXNzZXRzL2ltZy9zcHJpdGVzL2xhdmEucG5nJyk7XG4gICAgLy8gZm9udHNcbiAgICBCbHVlSnVtcEdhbWUuRk9OVCA9IGxvYWRGb250KCdhc3NldHMvZm9udHMvcm9ib3QwMS50dGYnKTtcbn1cblxuZnVuY3Rpb24gc2V0dXAoKSB7XG4gICAgLy8gaW5pdGlhbGlzZSBnYW1lIGluc3RhbmNlXG4gICAgYmogPSBuZXcgQmx1ZUp1bXBHYW1lKCk7XG4gICAgLy8gY2hhbmdlIGJlaGF2aW91ciBkZXBlbmRpbmcgb24gYnJvd3NlclxuICAgIGlmIChCbHVlSnVtcEdhbWUuSVNfU0FGQVJJKSB7XG4gICAgICAgIGNyZWF0ZUNhbnZhcyh3aW5kb3cuc2NyZWVuLndpZHRoLCB3aW5kb3dIZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNyZWF0ZUNhbnZhcyh3aW5kb3cuc2NyZWVuLndpZHRoLCB3aW5kb3cuc2NyZWVuLmhlaWdodCk7XG4gICAgfVxuICAgIEJsdWVKdW1wR2FtZS5maWVsZCA9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVmYXVsdENhbnZhczBcIikuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIC8vIGtlZXAgc3BlZWQgc2ltaWxhciBhY3Jvc3MgZGlmZmVyZW50IGRldmljZXNcbiAgICBpZiAoQmx1ZUp1bXBHYW1lLk1PQklMRV9DT05UUk9MUyA9PT0gMCkgZnJhbWVSYXRlKDMwKTtcbiAgICBlbHNlIGZyYW1lUmF0ZSgyNyk7XG4gICAgLy8gZml4IGZvbnRcbiAgICB0ZXh0Rm9udChCbHVlSnVtcEdhbWUuRk9OVCk7XG59XG5cbmZ1bmN0aW9uIGRyYXcoKSB7XG4gICAgYmFja2dyb3VuZCg1MSk7XG4gICAgYmoubG9vcChCbHVlSnVtcEdhbWUuREVCVUcpO1xufVxuIl19
